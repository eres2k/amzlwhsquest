<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMZL WHS QUEST - DVI1 Portal</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap');

        :root {
            --neon-green: #00ff00;
            --neon-cyan: #22d3ee;
            --neon-pink: #ff00ff;
            --warning-yellow: #fbbf24;
            --amazon-orange: #ff9900;
            --corp-blue: #0f172a;
            --bg-dark: #050510;
            --glass: rgba(10, 21, 37, 0.85);
            --terminal-gray: #0a1525;
            --gold-accent: #fbbf24;
            --premium-border: linear-gradient(135deg, #fbbf24, #22d3ee, #fbbf24);
        }

        * { box-sizing: border-box; }

        body {
            margin: 0; padding: 0;
            background: linear-gradient(180deg, #050510 0%, #0a1525 50%, #0f172a 100%);
            font-family: 'VT323', monospace;
            color: #e2e8f0;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* --- BACKGROUND CANVAS --- */
        #bg-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; pointer-events: none; opacity: 0.4;
        }

        /* --- CRT EFFECTS --- */
        body::after {
            content: " "; display: block; position: fixed;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            background-size: 100% 4px; z-index: 999; pointer-events: none;
        }

        /* --- TURN ON ANIMATION --- */
        .crt-turn-on {
            animation: turn-on 2s ease-out forwards;
        }
        @keyframes turn-on {
            0% { transform: scale(1, 0.002); opacity: 0; filter: brightness(30); }
            20% { transform: scale(1, 0.002); opacity: 1; }
            50% { transform: scale(1, 1.1); filter: brightness(5); }
            100% { transform: scale(1, 1); filter: brightness(1); }
        }

        .container {
            max-width: 1000px; margin: 0 auto; padding: 20px;
            position: relative; z-index: 1; width: 100%;
        }

        /* --- HEADER --- */
        header {
            text-align: center; margin-bottom: 20px;
            border-bottom: 3px solid transparent;
            border-image: linear-gradient(90deg, transparent, var(--gold-accent), var(--neon-cyan), var(--gold-accent), transparent) 1;
            padding-bottom: 25px;
            position: relative;
        }

        header::before {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
        }

        h1 {
            font-family: 'Press Start 2P', cursive;
            color: var(--gold-accent);
            font-size: clamp(1.5rem, 4vw, 3rem);
            text-shadow: 3px 3px #7c2d12, 0 0 20px rgba(251, 191, 36, 0.5);
            margin: 0; line-height: 1.5;
            position: relative;
        }

        /* GLITCH EFFECT */
        .glitch { position: relative; display: inline-block; }
        .glitch::before, .glitch::after {
            content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        }
        .glitch::before { left: 2px; text-shadow: -1px 0 red; clip: rect(44px, 450px, 56px, 0); animation: glitch-anim 5s infinite linear alternate-reverse; }
        .glitch::after { left: -2px; text-shadow: -1px 0 blue; clip: rect(44px, 450px, 56px, 0); animation: glitch-anim2 5s infinite linear alternate-reverse; }

        @keyframes glitch-anim {
            0% { clip: rect(10px, 9999px, 30px, 0); } 20% { clip: rect(80px, 9999px, 100px, 0); }
            40% { clip: rect(40px, 9999px, 60px, 0); } 60% { clip: rect(20px, 9999px, 10px, 0); }
            80% { clip: rect(60px, 9999px, 50px, 0); } 100% { clip: rect(90px, 9999px, 90px, 0); }
        }
        @keyframes glitch-anim2 {
            0% { clip: rect(50px, 9999px, 10px, 0); } 20% { clip: rect(20px, 9999px, 80px, 0); }
            40% { clip: rect(90px, 9999px, 20px, 0); } 60% { clip: rect(10px, 9999px, 50px, 0); }
            80% { clip: rect(30px, 9999px, 70px, 0); } 100% { clip: rect(60px, 9999px, 40px, 0); }
        }

        .subtitle {
            color: var(--neon-cyan); font-size: 1.5rem; letter-spacing: 2px;
            text-transform: uppercase; animation: blink 1s infinite;
            text-shadow: 0 0 10px var(--neon-cyan);
        }

        /* --- GEMINI LIVE FEED --- */
        #live-feed {
            background: linear-gradient(135deg, rgba(10, 15, 30, 0.95) 0%, rgba(5, 8, 20, 0.98) 100%);
            border: 2px solid var(--neon-cyan);
            border-radius: 4px;
            padding: 12px; margin-bottom: 20px; font-family: 'VT323', monospace;
            color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(34, 211, 238, 0.4), inset 0 0 20px rgba(0, 0, 0, 0.5);
            min-height: 60px; display: flex; align-items: center; justify-content: center;
            text-align: center; font-size: 1.2rem; overflow: hidden;
            position: relative; white-space: nowrap;
        }

        .ticker-track {
            display: inline-block; white-space: nowrap; padding-left: 100%;
            animation: ticker-scroll var(--scroll-duration, 40s) linear infinite;
        }

        @keyframes ticker-scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .loading-dots:after { content: '.'; animation: dots 1s steps(5, end) infinite; }
        @keyframes dots { 0%, 20% { content: '.'; } 40% { content: '..'; } 60% { content: '...'; } 80%, 100% { content: ''; } }

        section {
            background: linear-gradient(135deg, rgba(10, 21, 37, 0.9) 0%, rgba(15, 23, 42, 0.95) 100%);
            border: 2px solid #334155;
            border-radius: 8px;
            margin-bottom: 30px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5), inset 0 0 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(4px);
            transition: transform 0.2s, border-color 0.3s, box-shadow 0.3s;
            position: relative;
        }
        section::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gold-accent), var(--neon-cyan), var(--gold-accent), transparent);
            border-radius: 8px 8px 0 0;
        }
        section:hover {
            transform: translateY(-3px);
            border-color: var(--neon-cyan);
            box-shadow: 0 8px 30px rgba(34, 211, 238, 0.2), inset 0 0 30px rgba(0, 0, 0, 0.3);
        }

        h2 {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.2rem;
            color: var(--gold-accent);
            border-bottom: 2px solid #334155;
            padding-bottom: 12px;
            margin-top: 0;
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.3);
        }

        p { font-size: 1.1rem; line-height: 1.6; margin-bottom: 15px; color: #cbd5e1; }
        strong { color: var(--gold-accent); }

        .char-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 20px; }
        .char-card {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(10, 15, 30, 0.95) 100%);
            border: 2px solid #475569;
            border-radius: 6px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            transition: transform 0.2s, border-color 0.3s, box-shadow 0.3s;
            position: relative;
        }
        .char-card::after {
            content: '';
            position: absolute;
            bottom: 0; left: 10%; right: 10%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .char-card:hover {
            transform: translateY(-2px);
            border-color: var(--neon-cyan);
            box-shadow: 0 4px 15px rgba(34, 211, 238, 0.15);
        }
        .char-card:hover::after { opacity: 1; }
        .char-card h3 { color: var(--gold-accent); margin: 0 0 5px 0; font-family: 'Press Start 2P'; font-size: 0.9rem; text-shadow: 0 0 8px rgba(251, 191, 36, 0.3); }
        .card-content { display: flex; align-items: center; gap: 12px; }
        .card-content img, .card-content canvas {
            image-rendering: pixelated;
            width: 72px; height: 72px;
            border: 2px solid #334155;
            border-radius: 4px;
            background: linear-gradient(135deg, #0a0a14 0%, #1a1a2e 100%);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        .char-text { flex: 1; display: flex; flex-direction: column; gap: 6px; }
        .char-role { color: var(--neon-cyan); font-size: 1rem; text-transform: uppercase; margin: 0; border-bottom: 1px solid #334155; padding-bottom: 5px; }
        .char-desc { font-size: 0.9rem; color: #94a3b8; line-height: 1.4; flex-grow: 1; margin: 0;}
        .char-stat { margin: 0; font-size: 0.8rem; color: var(--gold-accent); font-style: italic; opacity: 0.8; }

        .play-btn {
            background: linear-gradient(135deg, #ff9900 0%, #ea580c 50%, #dc2626 100%);
            color: white;
            font-family: 'Press Start 2P';
            font-size: 1.5rem;
            padding: 25px 50px;
            text-decoration: none;
            border: 3px solid var(--gold-accent);
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(255, 153, 0, 0.5), inset 0 0 20px rgba(0, 0, 0, 0.3);
            display: inline-block;
            animation: pulse 1.5s infinite;
            cursor: pointer;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .play-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 50px rgba(255, 153, 0, 0.7), inset 0 0 20px rgba(0, 0, 0, 0.3);
            border-color: #fff;
        }

        /* Shine effect on button */
        .play-btn::after {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shine 3s infinite;
        }

        /* --- AI UTILITIES STYLES --- */
        .ai-tools-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 600px) { .ai-tools-grid { grid-template-columns: 1fr; } }

        .ai-tool {
            background: linear-gradient(135deg, rgba(10, 21, 37, 0.9) 0%, rgba(5, 10, 20, 0.95) 100%);
            border: 2px solid #334155;
            border-radius: 6px;
            padding: 18px;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
            transition: border-color 0.3s;
        }
        .ai-tool:hover { border-color: var(--neon-cyan); }
        .ai-tool h3 { font-size: 1rem; color: var(--neon-cyan); margin-top: 0; text-shadow: 0 0 8px rgba(34, 211, 238, 0.3); }
        .ai-tool p { flex-grow: 1; color: #94a3b8; }

        .ai-controls {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .ai-btn {
            background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%);
            color: var(--neon-cyan);
            border: 2px solid var(--neon-cyan);
            border-radius: 4px;
            font-family: 'Press Start 2P'; font-size: 0.7rem; padding: 12px;
            cursor: pointer; width: 100%;
            transition: all 0.2s;
            text-shadow: 0 0 5px var(--neon-cyan);
        }
        .ai-btn:hover {
            background: linear-gradient(135deg, #2d4a6f 0%, #1e3a5f 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(34, 211, 238, 0.3);
        }
        .ai-btn:disabled { background: #1a1a2e; cursor: not-allowed; border-color: #475569; color: #64748b; text-shadow: none; }

        .ai-output {
            margin-top: 15px;
            padding: 12px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(10, 10, 20, 0.9) 100%);
            border: 1px solid var(--gold-accent);
            border-radius: 4px;
            min-height: 60px;
            font-size: 0.9rem;
            color: var(--gold-accent);
            white-space: pre-wrap;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.5);
        }

        @keyframes shine { 0% { left: -100%; } 20% { left: 100%; } 100% { left: 100%; } }
        @keyframes blink { 50% { opacity: 0; } }
        @keyframes pulse { 0% { box-shadow: 0 0 30px rgba(255, 153, 0, 0.5), inset 0 0 20px rgba(0, 0, 0, 0.3); } 50% { box-shadow: 0 0 40px rgba(255, 153, 0, 0.7), 0 0 0 10px rgba(255, 153, 0, 0.1), inset 0 0 20px rgba(0, 0, 0, 0.3); } 100% { box-shadow: 0 0 30px rgba(255, 153, 0, 0.5), inset 0 0 20px rgba(0, 0, 0, 0.3); } }

        /* Beta/Modular button styles */
        .play-btn-small {
            background: linear-gradient(135deg, #0891b2 0%, #0369a1 50%, #075985 100%);
            color: white;
            font-family: 'Press Start 2P';
            font-size: 0.9rem;
            padding: 15px 30px;
            text-decoration: none;
            border: 2px solid var(--neon-cyan);
            border-radius: 6px;
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.4), inset 0 0 15px rgba(0, 0, 0, 0.3);
            display: inline-block;
            cursor: pointer;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px;
        }
        .play-btn-small:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(34, 211, 238, 0.6), inset 0 0 15px rgba(0, 0, 0, 0.3);
            border-color: #fff;
        }
        .beta-badge {
            display: inline-block;
            background: #facc15;
            color: #0a0a0a;
            font-size: 0.5rem;
            padding: 3px 8px;
            border-radius: 3px;
            margin-left: 8px;
            font-weight: bold;
            vertical-align: middle;
            box-shadow: 0 0 10px rgba(250, 204, 21, 0.5);
        }

        /* === MANUAL MODAL STYLES === */
        .manual-btn {
            background: linear-gradient(135deg, #78350f 0%, #451a03 100%);
            color: #fbbf24;
            font-family: 'Press Start 2P';
            font-size: 0.8rem;
            padding: 12px 25px;
            border: 2px solid #fbbf24;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            text-shadow: 0 0 5px rgba(251, 191, 36, 0.5);
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.3);
            margin: 10px;
        }
        .manual-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(251, 191, 36, 0.5);
            background: linear-gradient(135deg, #92400e 0%, #78350f 100%);
        }

        .whatsnew-btn {
            background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);
            color: #5eead4;
            font-family: 'Press Start 2P';
            font-size: 0.8rem;
            padding: 12px 25px;
            border: 2px solid #14b8a6;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            text-shadow: 0 0 5px rgba(94, 234, 212, 0.5);
            box-shadow: 0 0 15px rgba(20, 184, 166, 0.3);
            margin: 10px;
            animation: pulse-teal 2s infinite;
        }
        .whatsnew-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(20, 184, 166, 0.5);
            background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
        }
        @keyframes pulse-teal {
            0% { box-shadow: 0 0 15px rgba(20, 184, 166, 0.3); }
            50% { box-shadow: 0 0 25px rgba(20, 184, 166, 0.5), 0 0 0 8px rgba(20, 184, 166, 0.1); }
            100% { box-shadow: 0 0 15px rgba(20, 184, 166, 0.3); }
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: flex-start;
            padding: 30px 20px;
            overflow-y: auto;
            animation: fadeIn 0.3s ease;
        }
        .modal-overlay.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .modal-container {
            background: linear-gradient(180deg, #0f0f1a 0%, #1a1a2e 50%, #0a0a14 100%);
            border: 4px solid #fbbf24;
            border-radius: 8px;
            max-width: 900px;
            width: 100%;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 50px rgba(251, 191, 36, 0.4), inset 0 0 50px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.3s ease;
            position: relative;
        }
        @keyframes slideIn { from { transform: scale(0.9) translateY(-20px); opacity: 0; } to { transform: scale(1) translateY(0); opacity: 1; } }

        .modal-header {
            background: linear-gradient(90deg, #1a1a2e 0%, #2a2a4e 50%, #1a1a2e 100%);
            padding: 20px;
            border-bottom: 3px solid #fbbf24;
            text-align: center;
            position: relative;
        }
        .modal-title {
            font-family: 'Press Start 2P', cursive;
            color: #fbbf24;
            font-size: 1.2rem;
            text-shadow: 2px 2px #000, 0 0 20px rgba(251, 191, 36, 0.5);
            margin: 0;
        }
        .modal-subtitle {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-top: 8px;
        }
        .modal-close {
            position: absolute;
            top: 15px; right: 15px;
            background: #dc2626;
            border: 2px solid #ff4444;
            color: white;
            width: 35px; height: 35px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Press Start 2P';
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        .modal-close:hover { background: #ef4444; transform: scale(1.1); }

        .modal-tabs {
            display: flex;
            background: linear-gradient(180deg, #0a0a14 0%, #1a1a2e 100%);
            border-bottom: 2px solid #334155;
            overflow-x: auto;
            scrollbar-width: thin;
            scrollbar-color: #fbbf24 #1a1a2e;
        }
        .modal-tabs::-webkit-scrollbar { height: 6px; }
        .modal-tabs::-webkit-scrollbar-track { background: #1a1a2e; }
        .modal-tabs::-webkit-scrollbar-thumb { background: #fbbf24; border-radius: 3px; }

        .tab-btn {
            background: transparent;
            border: none;
            color: #64748b;
            font-family: 'Press Start 2P';
            font-size: 0.55rem;
            padding: 12px 15px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            flex-shrink: 0;
        }
        .tab-btn:hover { color: #94a3b8; background: rgba(251, 191, 36, 0.1); }
        .tab-btn.active {
            color: #fbbf24;
            border-bottom-color: #fbbf24;
            background: rgba(251, 191, 36, 0.1);
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }

        .modal-body {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
            scrollbar-width: thin;
            scrollbar-color: #22d3ee #1a1a2e;
        }
        .modal-body::-webkit-scrollbar { width: 8px; }
        .modal-body::-webkit-scrollbar-track { background: #1a1a2e; }
        .modal-body::-webkit-scrollbar-thumb { background: #22d3ee; border-radius: 4px; }

        .tab-content { display: none; animation: fadeContent 0.3s ease; }
        .tab-content.active { display: block; }
        @keyframes fadeContent { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .manual-page-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #334155;
        }

        .modal-footer {
            background: linear-gradient(90deg, #1a1a2e 0%, #0f0f1a 100%);
            padding: 15px 20px;
            border-top: 2px solid #334155;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav-btn {
            background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%);
            color: #22d3ee;
            border: 2px solid #22d3ee;
            font-family: 'Press Start 2P';
            font-size: 0.6rem;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .nav-btn:hover:not(:disabled) { background: #1e3a5f; transform: translateY(-2px); }
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .page-indicator { color: #64748b; font-size: 0.9rem; }

        @media (max-width: 600px) {
            .modal-container { max-height: 90vh; }
            .modal-body { padding: 15px; }
            .tab-btn { font-size: 0.5rem; padding: 10px 12px; }
            .modal-title { font-size: 1rem; }
        }

        /* --- LEADERBOARD STYLES --- */
        .leaderboard-container {
            overflow-x: auto;
        }
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'VT323', monospace;
            font-size: 1.1rem;
        }
        .leaderboard-table th {
            background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%);
            color: var(--gold-accent);
            font-family: 'Press Start 2P';
            font-size: 0.6rem;
            padding: 12px 8px;
            text-align: left;
            border-bottom: 2px solid var(--neon-cyan);
            white-space: nowrap;
        }
        .leaderboard-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #334155;
            color: #e2e8f0;
        }
        .leaderboard-table tr:hover td {
            background: rgba(34, 211, 238, 0.1);
        }
        .leaderboard-table .rank-col {
            width: 50px;
            text-align: center;
            font-family: 'Press Start 2P';
            font-size: 0.8rem;
        }
        .leaderboard-table .rank-1 { color: #fbbf24; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); }
        .leaderboard-table .rank-2 { color: #94a3b8; text-shadow: 0 0 8px rgba(148, 163, 184, 0.5); }
        .leaderboard-table .rank-3 { color: #cd7f32; text-shadow: 0 0 8px rgba(205, 127, 50, 0.5); }
        .leaderboard-table .name-col {
            font-family: 'Press Start 2P';
            font-size: 0.7rem;
            color: var(--neon-cyan);
        }
        .leaderboard-table .score-col {
            font-family: 'Press Start 2P';
            font-size: 0.8rem;
            color: var(--neon-green);
            text-align: right;
        }
        .leaderboard-table .char-col {
            font-size: 0.9rem;
        }
        .leaderboard-table .time-col {
            color: #94a3b8;
            text-align: right;
        }
        .leaderboard-table .boss-col {
            color: #f87171;
            font-size: 0.9rem;
        }
        .leaderboard-loading {
            text-align: center;
            color: var(--neon-cyan);
            padding: 30px;
            font-size: 1.2rem;
        }
        .leaderboard-empty {
            text-align: center;
            color: #64748b;
            padding: 30px;
            font-style: italic;
        }
        @media (max-width: 600px) {
            .leaderboard-table { font-size: 0.9rem; }
            .leaderboard-table th { font-size: 0.5rem; padding: 8px 4px; }
            .leaderboard-table td { padding: 8px 4px; }
            .leaderboard-table .rank-col { font-size: 0.6rem; }
            .leaderboard-table .name-col { font-size: 0.6rem; }
            .leaderboard-table .score-col { font-size: 0.6rem; }
        }
    </style>
</head>
<body class="crt-turn-on">

<canvas id="bg-canvas"></canvas>

<div class="container">
    <header>
        <h1><span class="glitch" data-text="AMZL WHS QUEST">AMZL WHS QUEST</span><br><span style="font-size:0.5em; color:#fff;">v12.2.5 - DVI1 EDITION</span></h1>
        <div class="subtitle">> WHS COORDINATOR TERMINAL_</div>
    </header>

    <div id="live-feed">
        <span id="feed-track" class="ticker-track">ESTABLISHING SECURE LINK TO AMAZON HQ...<span class="loading-dots"></span></span>
    </div>

    <div style="text-align: center; margin: 60px 0;">
        <a href="AMZLWHSQUEST122.html" class="play-btn">‚ñ∂ START SHIFT</a>
        <br>
        <button class="manual-btn" onclick="openManual()">üìñ INSTRUCTION MANUAL</button>
        <button class="whatsnew-btn" onclick="openWhatsNew()">üöÄ WHAT'S NEW</button>
        <p style="color: #aaa; font-size: 0.8rem; margin-top: 15px;">(INPUT: KEYBOARD | REWARD: PIZZA PARTY)</p>
    </div>

    <main>
        <section>
            <h2>> MISSION BRIEFING</h2>
            <p><strong>IDENTITY:</strong> Tier 1 WHS Coordinator</p>
            <p><strong>LOCATION:</strong> Delivery Station DVI1 (Vienna)</p>
            <p><strong>STATUS:</strong> Caffeinated but Panicked</p>
            <p>Welcome to DVI1. Your mission, should you choose to accept it (you have no choice, you signed the contract), is to survive a standard shift. The floor is a minefield of blocked exits, rogue pallet jacks, and Associates who believe safety shoes are "optional fashion statements".</p>
            <p>The Ops Managers are obsessed with TPH (Throughput Per Hour). They will throw crazy production requests at you. <strong>Do not fold.</strong> Find the 5 hazardous crimes against safety, audit the floor, and "take care" of the Visitor before the VOA board catches fire.</p>
        </section>

        <!-- LEADERBOARD SECTION -->
        <section>
            <h2>> HALL OF FAME</h2>
            <p>The <strong>TOP 10</strong> WHS Coordinators who survived the warehouse and defeated the bosses. Will your name be next?</p>
            <div class="leaderboard-container">
                <div id="leaderboard-content" class="leaderboard-loading">
                    ACCESSING MAINFRAME<span class="loading-dots"></span>
                </div>
            </div>
        </section>

        <section>
            <h2>> THE SQUAD (WHS Austria)</h2>
            <div class="char-grid">
                <div class="char-card">
                    <h3>CARRIE</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="carrie"></div>
                        <div class="char-text">
                            <div class="char-role">The 5S Monk</div>
                            <p class="char-desc">Precision hawk who spots crooked tape from 50 meters and keeps Ops chaos calm.</p>
                            <p class="char-stat">PRECISION FOCUS: 2x boss damage</p>
                            <p class="char-stat" style="color: #fbbf24;">‚öñÔ∏è BALANCED: 30% slower reload</p>
                        </div>
                    </div>
                </div>
                <div class="char-card">
                    <h3>NEVENA</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="nevena"></div>
                        <div class="char-text">
                            <div class="char-role">The Oracle</div>
                            <p class="char-desc">Safety oracle who predicts mishaps, packs Palatschinken, and documents everything twice.</p>
                            <p class="char-stat">FORESIGHT: Longer invincibility</p>
                        </div>
                    </div>
                </div>
                <div class="char-card">
                    <h3>JOAO</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="joao"></div>
                        <div class="char-text">
                            <div class="char-role">The Siren</div>
                            <p class="char-desc">Espresso cannon whose warnings cut through alarms and kick energy across the floor.</p>
                            <p class="char-stat">CAFFEINE RUSH: Faster attack cooldown</p>
                        </div>
                    </div>
                </div>
                <div class="char-card">
                    <h3>ROMAN</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="roman"></div>
                        <div class="char-text">
                            <div class="char-role">The Ghost</div>
                            <p class="char-desc">Bald audit phantom. Appears, fixes, vanishes‚Äîhazards correct themselves when he is near.</p>
                            <p class="char-stat">PHANTOM STEP: Smaller collision radius</p>
                        </div>
                    </div>
                </div>
                <div class="char-card">
                    <h3>ERWIN</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="erwin"></div>
                        <div class="char-text">
                            <div class="char-role">The Manager</div>
                            <p class="char-desc">Rolls in with a kid-sized Tesla and slides into briefings faster than gossip spreads.</p>
                            <p class="char-stat">TESLA RUSH: 1 life, 30% faster</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>> THREAT DATABASE (VISITORS)</h2>
            <div class="char-grid">
                <div class="char-card" style="border-color: #ff4444;">
                    <h3 style="color: #ff4444;">LABOUR INSPECTOR</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="boss_inspector"></div>
                        <div class="char-text">
                            <div class="char-role" style="color: #ff4444;">The Enforcer</div>
                            <p class="char-desc">Clipboard crusader who signs nothing unless the exit lines are laser straight.</p>
                        </div>
                    </div>
                </div>
                <div class="char-card" style="border-color: #ff4444;">
                    <h3 style="color: #ff4444;">COMPLIANCE</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="boss_compliance"></div>
                        <div class="char-text">
                            <div class="char-role" style="color: #ff4444;">The Auditor</div>
                            <p class="char-desc">Carries the SOP binder with endless patience and will quote the correct version in her sleep.</p>
                        </div>
                    </div>
                </div>
                <div class="char-card" style="border-color: #ff4444;">
                    <h3 style="color: #ff4444;">SEBASTIAN</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="boss_sebastian"></div>
                        <div class="char-text">
                            <div class="char-role" style="color: #ff4444;">THE Station Commander</div>
                            <p class="char-desc">Obsessed with rates. Believes "Safety Stops" are a myth invented to lower volume.</p>
                        </div>
                    </div>
                </div>
                <div class="char-card" style="border-color: #ff4444;">
                    <h3 style="color: #ff4444;">REGIONAL OPS MGR</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="boss_regional"></div>
                        <div class="char-text">
                            <div class="char-role" style="color: #ff4444;">The Executive</div>
                            <p class="char-desc">Arrives with gold tie energy and KPI thunder. If rates dip, expect a full audit storm.</p>
                        </div>
                    </div>
                </div>
                <div class="char-card" style="border-color: #ff4444;">
                    <h3 style="color: #ff4444;">AVETTA AI</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="boss_avetta"></div>
                        <div class="char-text">
                            <div class="char-role" style="color: #ff4444;">The Algorithm</div>
                            <p class="char-desc">A sentient cloud platform. It knows you forgot your gloves. It is watching.</p>
                        </div>
                    </div>
                </div>
                <div class="char-card" style="border-color: #ff4444;">
                    <h3 style="color: #ff4444;">JELENA "JELLY"</h3>
                    <div class="card-content">
                        <div class="char-portrait" data-sprite="boss_jelly"></div>
                        <div class="char-text">
                            <div class="char-role" style="color: #ff4444;">The HR Sentinel</div>
                            <p class="char-desc">From HR and always smiling, until policies are ignored. Remembers every infraction.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW AI SECTION (MOVED TO BOTTOM) -->
        <section>
            <h2>> WORKER UTILITIES</h2>
            <div class="ai-tools-grid">
                <!-- TOOL 1: EXCUSE GENERATOR -->
                <div class="ai-tool">
                    <div>
                        <h3>THE EXCUSE GENERATOR</h3>
                        <p style="font-size:0.8rem; color:#ccc;">Missed a TPH goal? Need to explain why you were in the breakroom for 17 minutes? Let the tool fabricate a technically plausible excuse.</p>
                    </div>
                    <div class="ai-controls">
                        <!-- ADDED INPUT FIELD HERE -->
                        <input type="text" id="excuse-input" placeholder="e.g. late for shift" style="width:100%; background:#222; border:1px solid #555; color:white; font-family:'VT323'; padding:5px;">
                        <button class="ai-btn" onclick="generateExcuse()" id="btn-excuse">GENERATE EXCUSE</button>
                        <div class="ai-output" id="out-excuse">// WAITING FOR INPUT...</div>
                    </div>
                </div>

                <!-- TOOL 2: OPS SPEAK TRANSLATOR -->
                <div class="ai-tool">
                    <div>
                        <h3>OPS SPEAK TRANSLATOR</h3>
                        <p style="font-size:0.8rem; color:#ccc;">Translate your complaints into "High Performance" corporate jargon that managers love.</p>
                    </div>
                    <div class="ai-controls">
                        <input type="text" id="translate-input" placeholder="e.g. I hate this job" style="width:100%; background:#222; border:1px solid #555; color:white; font-family:'VT323'; padding:5px;">
                        <button class="ai-btn" onclick="translateSpeak()" id="btn-translate">TRANSLATE</button>
                        <div class="ai-output" id="out-translate" style="color: #00ffff; border-color: #00ffff;">// WAITING FOR INPUT...</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>¬© 2025 ERWIN ESENER PRODUCTIONS // WHS MEU // DVI1 VIENNA //</p>
        <a href="index-modular.html" style="display: inline-block; margin-top: 10px; padding: 6px 12px; font-size: 0.6rem; font-family: 'Press Start 2P'; color: #64748b; text-decoration: none; border: 1px solid #334155; border-radius: 3px; background: rgba(15, 23, 42, 0.5); transition: all 0.2s;" onmouseover="this.style.color='#94a3b8'; this.style.borderColor='#475569';" onmouseout="this.style.color='#64748b'; this.style.borderColor='#334155';">MODULAR BUILD <span style="background: #854d0e; color: #fbbf24; font-size: 0.4rem; padding: 2px 5px; border-radius: 2px; margin-left: 5px;">WIP</span></a>
    </footer>
</div>

<script>
    // --- 1. RETRO GRID BACKGROUND ANIMATION ---
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    
    function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    let offset = 0;
    let starField = [];
    for (let i = 0; i < 50; i++) {
        starField.push({
            x: Math.random() * 2000,
            y: Math.random() * 2000,
            twinkleOffset: Math.random() * Math.PI * 2,
            size: Math.random() * 1.5 + 0.5
        });
    }

    function animateGrid() {
        ctx.fillStyle = '#050510';
        ctx.fillRect(0, 0, width, height);

        // Animated stars
        const t = Date.now() * 0.001;
        starField.forEach(star => {
            const twinkle = Math.sin(t * 2 + star.twinkleOffset) * 0.4 + 0.6;
            ctx.fillStyle = `rgba(255, 255, 255, ${twinkle * 0.5})`;
            ctx.fillRect(star.x % width, star.y % height, star.size, star.size);
        });

        // Horizon line
        const horizon = height * 0.4;

        // Vertical lines (Perspective) - cyan color
        ctx.strokeStyle = 'rgba(34, 211, 238, 0.15)';
        ctx.lineWidth = 1;
        ctx.beginPath();
        const cx = width / 2;
        for(let i = -20; i <= 20; i++) {
            const x = cx + (i * 100);
            ctx.moveTo(cx, horizon);
            ctx.lineTo(x * 4, height);
        }
        ctx.stroke();

        // Horizontal lines (Moving towards viewer) - gradient cyan to gold
        offset = (offset + 0.5) % 20;
        for(let i = 0; i < 40; i++) {
            let y = horizon + Math.pow(i, 2.5) + offset;
            if (y > height) continue;

            let alpha = (y - horizon) / (height - horizon);
            // Blend from cyan to gold based on depth
            const r = Math.floor(34 + (251 - 34) * alpha);
            const g = Math.floor(211 + (191 - 211) * alpha);
            const b = Math.floor(238 + (36 - 238) * alpha);
            ctx.strokeStyle = `rgba(${r}, ${g}, ${b}, ${alpha * 0.25})`;

            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(width, y);
            ctx.stroke();
        }

        requestAnimationFrame(animateGrid);
    }
    animateGrid();

    // --- 2. KEY FETCHING (NEW) ---
    let apiKey = null;

    async function fetchApiKeyFromNetlify() {
        try {
            // This endpoint must exist in your Netlify functions folder
            const res = await fetch('/.netlify/functions/get-gemini-key', { cache: 'no-store' });
            if (!res.ok) throw new Error(`Netlify key endpoint returned ${res.status}`);
            const data = await res.json();
            const key = (data && data.apiKey ? String(data.apiKey) : '').trim();
            if (!key) throw new Error('No apiKey field in Netlify response');
            apiKey = key;
            console.log("SECURE LINK ESTABLISHED. KEY LOADED.");
            return apiKey;
        } catch (err) {
            console.error("FAILED TO LOAD KEY:", err);
            return null;
        }
    }

    // --- 3. GEMINI API INTEGRATION ---
    const defaultMessages = [
        "ATTENTION DVI1: IF YOU CAN READ THIS, YOU're NOT MOVING PALLETS FAST ENOUGH.",
        "ATTENTION DVI1: TPH GOAL UPDATED TO WHATEVER IS HIGHER THAN CURRENT. PLEASE COMPLY.",
        "ATTENTION DVI1: BREAKS ARE LIKE UNICORNS. HEARD OFTEN, RARELY SEEN.",
        "ATTENTION DVI1: REMEMBER, SAFETY FIRST, BUT ALSO SECOND, THIRD, AND MAYBE FOURTH.",
        "ATTENTION DVI1: LOST A RACK? PLEASE FILE A TICKET WITH FACILITIES AND YOUR THERAPIST.",
        "ATTENTION DVI1: OPS SAYS WE'RE FAMILY. FAMILY DOES 60 TPH, RIGHT?"
    ];

    function renderTicker(messages) {
        const track = document.getElementById('feed-track');
        const separator = "  ‚ö°  ";
        const text = messages.join(separator);
        track.innerText = text + separator + text;

        const duration = Math.max(30, Math.min(90, text.length / 1.5));
        track.style.setProperty('--scroll-duration', `${duration}s`);
    }

    async function callGemini(prompt) {
        if (!apiKey) await fetchApiKeyFromNetlify();
        if (!apiKey) return null;

        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });
            const data = await response.json();
            return data.candidates?.[0]?.content?.parts?.[0]?.text;
        } catch (e) {
            console.error(e);
            return null;
        }
    }

    async function fetchAnnouncement() {
        const track = document.getElementById('feed-track');
        track.innerText = "CONNECTING TO HQ...";
        
        await fetchApiKeyFromNetlify(); // Ensure key is loaded
        
        if (!apiKey) {
            renderTicker(defaultMessages);
            return;
        }

        const prompt = "Write a single, short (max 15 words), funny, cynical, dystopic announcement for an Amazon logistics warehouse worker. Mention safety shoes, TOT, or rates. Use ALL CAPS. Start with 'ATTENTION:'.";
        const text = await callGemini(prompt);
        
        if(text) renderTicker([text, ...defaultMessages]);
        else renderTicker(defaultMessages);
    }

    // --- 4. NEW AI TOOLS ---
    async function generateExcuse() {
        const out = document.getElementById('out-excuse');
        const btn = document.getElementById('btn-excuse');
        const input = document.getElementById('excuse-input').value; // GET INPUT
        
        btn.disabled = true;
        btn.innerText = "CALCULATING...";
        out.innerText = "// ACCESSING MAINFRAME...";
        
        // DEFAULT TOPIC IF EMPTY
        let topic = "having low rates";
        if (input && input.trim() !== "") {
            topic = `the issue: "${input}"`;
        }
        
       const prompt = `Invent a technically plausible, realistic excuse based on this short input: "${input}". Max 25 Words. Amazon related with humour.`;
        const text = await callGemini(prompt);
        
        if (text) out.innerText = "> " + text;
        else out.innerText = "> ERROR: EXCUSE MODULE OFFLINE. TRY TELLING THE TRUTH (NOT RECOMMENDED).";
        
        btn.disabled = false;
        btn.innerText = "GENERATE EXCUSE";
    }

    async function translateSpeak() {
        const input = document.getElementById('translate-input').value;
        const out = document.getElementById('out-translate');
        const btn = document.getElementById('btn-translate');
        
        if (!input) { out.innerText = "> ERROR: NO INPUT DETECTED."; return; }

        btn.disabled = true;
        btn.innerText = "OPTIMIZING...";
        out.innerText = "// APPLYING SYNERGY...";
        
        const prompt = `Translate this worker complaint: "${input}" into overly positive, corporate, Amazon-style management speak. Max 25 words.`;
        const text = await callGemini(prompt);
        
        if (text) out.innerText = "> " + text;
        else out.innerText = "> ERROR: TRANSLATION FAILED.";
        
        btn.disabled = false;
        btn.innerText = "TRANSLATE";
    }

    // --- 5. PIXEL PORTRAITS (Enhanced to match game graphics) ---
    const spritePainters = {
        carrie: ctx => {
            // Shadow base
            ctx.fillStyle = 'rgba(0,0,0,0.3)';
            ctx.beginPath(); ctx.ellipse(8, 15, 5, 2, 0, 0, Math.PI*2); ctx.fill();
            // Hair with highlight
            ctx.fillStyle = '#0a0f1f'; ctx.fillRect(2,0,12,6);
            ctx.fillStyle = '#1a2540'; ctx.fillRect(3,1,10,3);
            // Face with shading
            ctx.fillStyle = '#f5d0a0'; ctx.fillRect(4,5,8,6);
            ctx.fillStyle = '#e8c090'; ctx.fillRect(4,5,2,4);
            // Eyes
            ctx.fillStyle = '#1e3a5a'; ctx.fillRect(5,7,2,2);
            ctx.fillStyle = '#0ea5e9'; ctx.fillRect(9,7,2,2);
            ctx.fillStyle = '#fff'; ctx.fillRect(6,7,1,1); ctx.fillRect(10,7,1,1);
            // Robe with gradient effect
            ctx.fillStyle = '#7c3aed'; ctx.fillRect(3,11,10,5);
            ctx.fillStyle = '#a855f7'; ctx.fillRect(4,11,8,4);
            ctx.fillStyle = '#c4b5fd'; ctx.fillRect(7,12,2,2);
            // Boots
            ctx.fillStyle = '#1e3a8a'; ctx.fillRect(4,15,3,1); ctx.fillRect(9,15,3,1);
        },
        nevena: ctx => {
            // Shadow
            ctx.fillStyle = 'rgba(0,0,0,0.3)';
            ctx.beginPath(); ctx.ellipse(8, 15, 5, 2, 0, 0, Math.PI*2); ctx.fill();
            // Brown hair
            ctx.fillStyle = '#7c2d12'; ctx.fillRect(3,1,10,5);
            ctx.fillStyle = '#9a3c1c'; ctx.fillRect(4,2,8,3);
            // Face
            ctx.fillStyle = '#f5c89a'; ctx.fillRect(5,5,6,6);
            ctx.fillStyle = '#e8b888'; ctx.fillRect(5,5,2,4);
            // Eyes
            ctx.fillStyle = '#15803d'; ctx.fillRect(6,7,2,2);
            ctx.fillStyle = '#22c55e'; ctx.fillRect(9,7,2,2);
            ctx.fillStyle = '#fff'; ctx.fillRect(7,7,1,1); ctx.fillRect(10,7,1,1);
            // Headband
            ctx.fillStyle = '#0ea5e9'; ctx.fillRect(3,3,10,2);
            ctx.fillStyle = '#22d3ee'; ctx.fillRect(4,3,8,1);
            // Jacket
            ctx.fillStyle = '#7f1d1d'; ctx.fillRect(3,11,10,5);
            ctx.fillStyle = '#991b1b'; ctx.fillRect(4,11,8,4);
            // Clipboard
            ctx.fillStyle = '#eab308'; ctx.fillRect(4,12,2,2); ctx.fillRect(10,12,2,2);
            // Boots
            ctx.fillStyle = '#334155'; ctx.fillRect(5,15,2,1); ctx.fillRect(9,15,2,1);
        },
        joao: ctx => {
            // Shadow
            ctx.fillStyle = 'rgba(0,0,0,0.3)';
            ctx.beginPath(); ctx.ellipse(8, 15, 5, 2, 0, 0, Math.PI*2); ctx.fill();
            // Hair
            ctx.fillStyle = '#0f172a'; ctx.fillRect(4,0,8,4);
            ctx.fillStyle = '#1e293b'; ctx.fillRect(5,1,6,2);
            // Face
            ctx.fillStyle = '#f0a16b'; ctx.fillRect(5,3,6,6);
            ctx.fillStyle = '#e09050'; ctx.fillRect(5,3,2,4);
            // Eyes
            ctx.fillStyle = '#422006'; ctx.fillRect(6,5,2,2);
            ctx.fillStyle = '#78350f'; ctx.fillRect(9,5,2,2);
            ctx.fillStyle = '#fff'; ctx.fillRect(7,5,1,1); ctx.fillRect(10,5,1,1);
            // Mic wire
            ctx.fillStyle = '#22d3ee'; ctx.fillRect(4,8,8,1);
            // Vest
            ctx.fillStyle = '#ea580c'; ctx.fillRect(3,9,10,7);
            ctx.fillStyle = '#fb923c'; ctx.fillRect(4,10,8,5);
            ctx.fillStyle = '#f97316'; ctx.fillRect(4,11,2,2); ctx.fillRect(10,11,2,2);
            // Boots
            ctx.fillStyle = '#0ea5e9'; ctx.fillRect(5,15,2,1); ctx.fillRect(9,15,2,1);
        },
        roman: ctx => {
            // Shadow
            ctx.fillStyle = 'rgba(0,0,0,0.3)';
            ctx.beginPath(); ctx.ellipse(8, 15, 5, 2, 0, 0, Math.PI*2); ctx.fill();
            // Bald head
            ctx.fillStyle = '#f5d0a0'; ctx.fillRect(4,2,8,8);
            ctx.fillStyle = '#e8c090'; ctx.fillRect(4,2,2,6);
            ctx.fillStyle = '#fce4c8'; ctx.fillRect(6,3,4,2);
            // Eyes
            ctx.fillStyle = '#374151'; ctx.fillRect(5,6,2,2);
            ctx.fillStyle = '#6b7280'; ctx.fillRect(9,6,2,2);
            ctx.fillStyle = '#fff'; ctx.fillRect(6,6,1,1); ctx.fillRect(10,6,1,1);
            // Stealth coat
            ctx.fillStyle = '#0f172a'; ctx.fillRect(3,10,10,6);
            ctx.fillStyle = '#1e293b'; ctx.fillRect(4,10,8,5);
            ctx.fillStyle = '#94a3b8'; ctx.fillRect(4,11,2,2); ctx.fillRect(10,11,2,2);
            // Boots
            ctx.fillStyle = '#0b1224'; ctx.fillRect(4,15,3,1); ctx.fillRect(9,15,3,1);
        },
        erwin: ctx => {
            // Tesla body with metallic look
            ctx.fillStyle = '#4b5563'; ctx.fillRect(2,8,12,6);
            ctx.fillStyle = '#6b7280'; ctx.fillRect(3,9,10,4);
            ctx.fillStyle = '#9ca3af'; ctx.fillRect(4,10,8,2);
            // Wheels
            ctx.fillStyle = '#1f2937'; ctx.fillRect(1,12,3,2); ctx.fillRect(12,12,3,2);
            ctx.fillStyle = '#9ca3af'; ctx.fillRect(2,12,1,1); ctx.fillRect(13,12,1,1);
            // Windshield
            ctx.fillStyle = '#22d3ee'; ctx.fillRect(4,9,8,3);
            ctx.fillStyle = '#67e8f9'; ctx.fillRect(5,10,6,1);
            // Head in car
            ctx.fillStyle = '#0f172a'; ctx.fillRect(5,3,6,4);
            ctx.fillStyle = '#f5d0a0'; ctx.fillRect(6,4,4,3);
            ctx.fillStyle = '#000'; ctx.fillRect(7,5,1,1); ctx.fillRect(9,5,1,1);
            ctx.fillStyle = '#eab308'; ctx.fillRect(6,6,4,1);
            // Bumper
            ctx.fillStyle = '#0f172a'; ctx.fillRect(3,14,10,2);
            ctx.fillStyle = '#dc2626'; ctx.fillRect(3,14,2,1); ctx.fillRect(11,14,2,1);
        },
        boss_inspector: ctx => {
            // Shadow
            ctx.fillStyle = 'rgba(0,0,0,0.4)';
            ctx.beginPath(); ctx.ellipse(8, 15, 6, 2, 0, 0, Math.PI*2); ctx.fill();
            // Gray hair with detail
            ctx.fillStyle = '#52525b'; ctx.fillRect(3,0,10,5);
            ctx.fillStyle = '#6b7280'; ctx.fillRect(4,1,8,3);
            ctx.fillStyle = '#9ca3af'; ctx.fillRect(5,1,6,2); // Highlight
            ctx.fillStyle = '#d4d4d4'; ctx.fillRect(6,1,4,1); // Bright highlight
            // Clipboard prop
            ctx.fillStyle = '#78350f'; ctx.fillRect(1,8,3,5);
            ctx.fillStyle = '#fcd34d'; ctx.fillRect(1,8,2,4);
            ctx.fillStyle = '#ef4444'; ctx.fillRect(1,9,2,1); // Red violation
            // Face with detail
            ctx.fillStyle = '#d4a574'; ctx.fillRect(4,4,8,6);
            ctx.fillStyle = '#e8c49a'; ctx.fillRect(5,5,6,4);
            // Furrowed eyebrows (angry)
            ctx.fillStyle = '#52525b'; ctx.fillRect(5,5,2,1); ctx.fillRect(9,5,2,1);
            ctx.fillRect(4,5,1,1); ctx.fillRect(11,5,1,1); // Angry angle
            // Stern eyes
            ctx.fillStyle = '#1a1a1a'; ctx.fillRect(5,6,2,2); ctx.fillRect(9,6,2,2);
            ctx.fillStyle = '#fff'; ctx.fillRect(5,6,1,1); ctx.fillRect(9,6,1,1); // Cold glint
            // Nose
            ctx.fillStyle = '#c4956a'; ctx.fillRect(7,7,2,2);
            // Frown
            ctx.fillStyle = '#8b4513'; ctx.fillRect(6,9,4,1);
            // Yellow inspector jacket with detail
            ctx.fillStyle = '#92400e'; ctx.fillRect(3,10,10,6);
            ctx.fillStyle = '#ca8a04'; ctx.fillRect(4,10,8,5);
            ctx.fillStyle = '#eab308'; ctx.fillRect(5,11,6,3);
            ctx.fillStyle = '#fbbf24'; ctx.fillRect(6,12,4,1); // Bright center
            // Large badge
            ctx.fillStyle = '#0369a1'; ctx.fillRect(6,12,4,2);
            ctx.fillStyle = '#0ea5e9'; ctx.fillRect(7,12,2,1);
            ctx.fillStyle = '#fff'; ctx.fillRect(7,12,1,1); // Badge shine
            // Pointing finger
            ctx.fillStyle = '#d4a574'; ctx.fillRect(12,10,2,3);
            ctx.fillStyle = '#e8c49a'; ctx.fillRect(12,10,1,2);
            ctx.fillStyle = '#d4a574'; ctx.fillRect(13,9,1,2); // Finger
            // Boots
            ctx.fillStyle = '#1f2937'; ctx.fillRect(5,15,2,1); ctx.fillRect(9,15,2,1);
        },
        boss_compliance: ctx => {
            // Shadow
            ctx.fillStyle = 'rgba(0,0,0,0.4)';
            ctx.beginPath(); ctx.ellipse(8, 15, 6, 2, 0, 0, Math.PI*2); ctx.fill();
            // Audit papers prop
            ctx.fillStyle = '#475569'; ctx.fillRect(12,8,3,6);
            ctx.fillStyle = '#e2e8f0'; ctx.fillRect(12,8,2,5);
            ctx.fillStyle = '#0891b2'; ctx.fillRect(12,9,2,1); ctx.fillRect(12,11,2,1); // Lines
            // Dark slicked hair with detail
            ctx.fillStyle = '#0a0f1f'; ctx.fillRect(3,0,10,5);
            ctx.fillStyle = '#1a2744'; ctx.fillRect(4,1,8,3);
            ctx.fillStyle = '#334155'; ctx.fillRect(5,1,6,2); // Highlight
            ctx.fillStyle = '#475569'; ctx.fillRect(6,1,4,1); // Gel shine
            // Face with detail
            ctx.fillStyle = '#d4a574'; ctx.fillRect(4,4,8,7);
            ctx.fillStyle = '#e8c49a'; ctx.fillRect(5,5,6,5);
            // Sharp eyebrows
            ctx.fillStyle = '#0a0f1f'; ctx.fillRect(5,5,2,1); ctx.fillRect(9,5,2,1);
            // Calculating narrow eyes
            ctx.fillStyle = '#1a1a1a'; ctx.fillRect(5,6,2,2); ctx.fillRect(9,6,2,2);
            ctx.fillStyle = '#64748b'; ctx.fillRect(5,7,1,1); ctx.fillRect(9,7,1,1); // Grey eyes
            ctx.fillStyle = '#94a3b8'; ctx.fillRect(5,6,1,1); ctx.fillRect(9,6,1,1); // Glint
            // Nose
            ctx.fillStyle = '#c4956a'; ctx.fillRect(7,7,2,2);
            // Thin mouth
            ctx.fillStyle = '#8b4513'; ctx.fillRect(6,9,4,1);
            // Cyan compliance suit with detail
            ctx.fillStyle = '#164e63'; ctx.fillRect(3,10,10,6);
            ctx.fillStyle = '#0891b2'; ctx.fillRect(4,10,8,5);
            ctx.fillStyle = '#0ea5e9'; ctx.fillRect(5,11,6,3);
            ctx.fillStyle = '#22d3ee'; ctx.fillRect(6,12,4,1); // Bright center
            // Necktie (teal)
            ctx.fillStyle = '#115e59'; ctx.fillRect(7,10,2,5);
            ctx.fillStyle = '#14b8a6'; ctx.fillRect(7,11,2,3);
            // Badge
            ctx.fillStyle = '#fff'; ctx.fillRect(6,13,4,1);
            ctx.fillStyle = '#0891b2'; ctx.fillRect(6,13,3,1);
            // Tablet in hand
            ctx.fillStyle = '#475569'; ctx.fillRect(2,12,2,3);
            ctx.fillStyle = '#64748b'; ctx.fillRect(2,12,1,2);
            ctx.fillStyle = '#0ea5e9'; ctx.fillRect(2,13,1,1); // Screen
            // Shoes
            ctx.fillStyle = '#1e293b'; ctx.fillRect(5,15,2,1); ctx.fillRect(9,15,2,1);
        },
        boss_regional: ctx => {
            // Shadow
            ctx.fillStyle = 'rgba(0,0,0,0.4)';
            ctx.beginPath(); ctx.ellipse(8, 15, 6, 2, 0, 0, Math.PI*2); ctx.fill();
            // KPI chart prop
            ctx.fillStyle = '#422006'; ctx.fillRect(1,10,3,5);
            ctx.fillStyle = '#fbbf24'; ctx.fillRect(1,10,2,4);
            ctx.fillStyle = '#78350f'; ctx.fillRect(1,11,2,1); ctx.fillRect(1,13,2,2); // Bars
            // Executive slicked hair with gel
            ctx.fillStyle = '#1e1b4b'; ctx.fillRect(2,0,12,5);
            ctx.fillStyle = '#312e81'; ctx.fillRect(3,1,10,3);
            ctx.fillStyle = '#4c1d95'; ctx.fillRect(4,1,8,2); // Highlight
            ctx.fillStyle = '#6d28d9'; ctx.fillRect(5,1,6,1); // Gel shine
            // Face with detail
            ctx.fillStyle = '#d4a574'; ctx.fillRect(4,5,8,6);
            ctx.fillStyle = '#e8c49a'; ctx.fillRect(5,6,6,4);
            // Confident eyebrows
            ctx.fillStyle = '#1e1b4b'; ctx.fillRect(5,5,2,1); ctx.fillRect(9,5,2,1);
            // Confident eyes
            ctx.fillStyle = '#1a1a1a'; ctx.fillRect(5,7,2,2); ctx.fillRect(9,7,2,2);
            ctx.fillStyle = '#3b82f6'; ctx.fillRect(5,7,1,1); ctx.fillRect(9,7,1,1); // Blue eyes
            ctx.fillStyle = '#fff'; ctx.fillRect(6,7,1,1); ctx.fillRect(10,7,1,1); // Glint
            // Nose
            ctx.fillStyle = '#c4956a'; ctx.fillRect(7,8,2,1);
            // Smirk
            ctx.fillStyle = '#8b4513'; ctx.fillRect(6,9,3,1);
            ctx.fillStyle = '#c17b5f'; ctx.fillRect(8,9,2,1); // Smirk corner
            // Purple executive suit with detail
            ctx.fillStyle = '#3b0764'; ctx.fillRect(3,10,10,6);
            ctx.fillStyle = '#4c1d95'; ctx.fillRect(4,10,8,5);
            ctx.fillStyle = '#6d28d9'; ctx.fillRect(5,11,6,3);
            ctx.fillStyle = '#8b5cf6'; ctx.fillRect(6,12,4,1); // Bright center
            // Gold necktie
            ctx.fillStyle = '#92400e'; ctx.fillRect(7,10,2,5);
            ctx.fillStyle = '#d97706'; ctx.fillRect(7,11,2,3);
            ctx.fillStyle = '#fbbf24'; ctx.fillRect(7,11,2,2); // Shine
            // Executive badge
            ctx.fillStyle = '#422006'; ctx.fillRect(6,13,4,1);
            ctx.fillStyle = '#fbbf24'; ctx.fillRect(6,13,3,1);
            // Phone in hand
            ctx.fillStyle = '#1e293b'; ctx.fillRect(12,11,2,4);
            ctx.fillStyle = '#3b82f6'; ctx.fillRect(12,12,1,2); // Screen
            // Dress shoes
            ctx.fillStyle = '#0a0a0a'; ctx.fillRect(5,15,2,1); ctx.fillRect(9,15,2,1);
            ctx.fillStyle = '#1a1a1a'; ctx.fillRect(5,15,1,1); ctx.fillRect(9,15,1,1); // Shine
        },
        boss_sebastian: ctx => {
            // Shadow
            ctx.fillStyle = 'rgba(0,0,0,0.4)';
            ctx.beginPath(); ctx.ellipse(8, 15, 6, 2, 0, 0, Math.PI*2); ctx.fill();
            // TPH monitor prop
            ctx.fillStyle = '#1e293b'; ctx.fillRect(12,6,3,5);
            ctx.fillStyle = '#14532d'; ctx.fillRect(12,6,2,4);
            ctx.fillStyle = '#22c55e'; ctx.fillRect(12,7,2,1); // TPH
            ctx.fillStyle = '#ef4444'; ctx.fillRect(12,9,2,1); // Alert
            // EPIC BALD HEAD with shine
            ctx.fillStyle = '#e8c49a'; ctx.fillRect(4,0,8,7);
            ctx.fillStyle = '#f5d0a0'; ctx.fillRect(5,0,6,6);
            ctx.fillStyle = '#faebd7'; ctx.fillRect(5,0,5,4); // Shine
            ctx.fillStyle = '#fff5e6'; ctx.fillRect(6,0,4,3); // Bright shine
            ctx.fillStyle = 'rgba(255,255,255,0.5)'; ctx.fillRect(6,0,3,2); // Epic highlight
            // Stressed eyebrows
            ctx.fillStyle = '#6b5340'; ctx.fillRect(5,5,2,1); ctx.fillRect(9,5,2,1);
            ctx.fillRect(4,4,1,1); ctx.fillRect(11,4,1,1); // Furrow
            // Intense eyes
            ctx.fillStyle = '#1a1a1a'; ctx.fillRect(5,6,2,2); ctx.fillRect(9,6,2,2);
            ctx.fillStyle = '#92400e'; ctx.fillRect(5,7,1,1); ctx.fillRect(9,7,1,1); // Brown eyes
            ctx.fillStyle = '#fff'; ctx.fillRect(6,6,1,1); ctx.fillRect(10,6,1,1); // Glint
            // Nose
            ctx.fillStyle = '#c4956a'; ctx.fillRect(7,7,2,2);
            // Beard with detail
            ctx.fillStyle = '#6b5340'; ctx.fillRect(5,8,6,2);
            ctx.fillStyle = '#7a6248'; ctx.fillRect(6,8,4,2);
            ctx.fillStyle = '#8b7355'; ctx.fillRect(7,8,2,1); // Center
            // Mustache
            ctx.fillStyle = '#6b5340'; ctx.fillRect(6,7,4,1);
            ctx.fillStyle = '#7a6248'; ctx.fillRect(7,7,2,1);
            // Amazon blue polo with detail
            ctx.fillStyle = '#1e3a8a'; ctx.fillRect(3,10,10,6);
            ctx.fillStyle = '#1d4ed8'; ctx.fillRect(4,10,8,5);
            ctx.fillStyle = '#2563eb'; ctx.fillRect(5,11,6,3);
            ctx.fillStyle = '#3b82f6'; ctx.fillRect(6,12,4,1); // Bright center
            // White collar
            ctx.fillStyle = '#fff'; ctx.fillRect(5,10,6,1);
            // LARGE Amazon smile logo
            ctx.fillStyle = '#c2410c'; ctx.fillRect(6,12,4,2);
            ctx.fillStyle = '#f97316'; ctx.fillRect(6,12,4,1);
            ctx.fillStyle = '#fb923c'; ctx.fillRect(8,12,2,2); // Smile curve
            // Clipboard
            ctx.fillStyle = '#78350f'; ctx.fillRect(1,11,2,4);
            ctx.fillStyle = '#fcd34d'; ctx.fillRect(1,11,1,3);
            // Boots
            ctx.fillStyle = '#1f2937'; ctx.fillRect(5,15,2,1); ctx.fillRect(9,15,2,1);
        },
        boss_jelly: ctx => {
            // Shadow
            ctx.fillStyle = 'rgba(0,0,0,0.4)';
            ctx.beginPath(); ctx.ellipse(8, 15, 6, 2, 0, 0, Math.PI*2); ctx.fill();
            // Policy binder prop
            ctx.fillStyle = '#14532d'; ctx.fillRect(1,9,3,6);
            ctx.fillStyle = '#f0fdf4'; ctx.fillRect(1,9,2,5);
            ctx.fillStyle = '#166534'; ctx.fillRect(1,10,2,1); ctx.fillRect(1,12,2,1); // Lines
            // Brown hair with styling
            ctx.fillStyle = '#4a2c1a'; ctx.fillRect(3,0,10,6);
            ctx.fillStyle = '#5c3d2e'; ctx.fillRect(4,1,8,4);
            ctx.fillStyle = '#7a5142'; ctx.fillRect(5,1,6,3); // Mid-tone
            ctx.fillStyle = '#8b6352'; ctx.fillRect(6,1,4,2); // Highlight
            ctx.fillStyle = '#9d7861'; ctx.fillRect(6,1,3,1); // Bright highlight
            // Face with detail
            ctx.fillStyle = '#d4a574'; ctx.fillRect(4,5,8,6);
            ctx.fillStyle = '#e8c49a'; ctx.fillRect(5,6,6,4);
            // Friendly eyebrows (raised)
            ctx.fillStyle = '#5c3d2e'; ctx.fillRect(5,5,2,1); ctx.fillRect(9,5,2,1);
            ctx.fillRect(5,4,2,1); ctx.fillRect(9,4,2,1); // Arch
            // Kind eyes
            ctx.fillStyle = '#1a1a1a'; ctx.fillRect(5,7,2,2); ctx.fillRect(9,7,2,2);
            ctx.fillStyle = '#6d4c41'; ctx.fillRect(5,7,1,1); ctx.fillRect(9,7,1,1); // Warm eyes
            ctx.fillStyle = '#fff'; ctx.fillRect(6,7,1,1); ctx.fillRect(10,7,1,1); // Glint
            // Nose
            ctx.fillStyle = '#c4956a'; ctx.fillRect(7,8,2,1);
            // Warm smile
            ctx.fillStyle = '#c17b5f'; ctx.fillRect(6,9,4,1);
            ctx.fillStyle = '#d4a574'; ctx.fillRect(5,9,2,1); ctx.fillRect(8,9,2,1); // Curves
            ctx.fillStyle = '#8b4513'; ctx.fillRect(6,10,4,1); // Lower lip
            // Green HR jacket with detail
            ctx.fillStyle = '#14532d'; ctx.fillRect(3,10,10,6);
            ctx.fillStyle = '#166534'; ctx.fillRect(4,10,8,5);
            ctx.fillStyle = '#16a34a'; ctx.fillRect(5,11,6,3);
            ctx.fillStyle = '#22c55e'; ctx.fillRect(6,12,4,1); // Bright center
            ctx.fillStyle = '#4ade80'; ctx.fillRect(6,12,3,1); // Highlight
            // White collar
            ctx.fillStyle = '#f0fdf4'; ctx.fillRect(5,10,6,1);
            // Large HR badge
            ctx.fillStyle = '#fff'; ctx.fillRect(6,13,4,1);
            ctx.fillStyle = '#166534'; ctx.fillRect(6,13,3,1);
            ctx.fillStyle = '#1a1a1a'; ctx.fillRect(6,13,2,1); // Name
            // Pen in hand
            ctx.fillStyle = '#3b82f6'; ctx.fillRect(12,12,1,3);
            ctx.fillStyle = '#60a5fa'; ctx.fillRect(12,12,1,2);
            ctx.fillStyle = '#1a1a1a'; ctx.fillRect(12,14,1,1); // Tip
            // Shoes
            ctx.fillStyle = '#1f2937'; ctx.fillRect(5,15,2,1); ctx.fillRect(9,15,2,1);
        },
        boss_avetta: ctx => {
            // AI Platform sprite with cyber glow
            ctx.fillStyle = 'rgba(34, 211, 238, 0.4)';
            ctx.beginPath(); ctx.ellipse(8, 15, 7, 2, 0, 0, Math.PI*2); ctx.fill();
            // Floating data nodes
            ctx.fillStyle = 'rgba(34, 211, 238, 0.4)';
            ctx.fillRect(1,5,2,2); ctx.fillRect(13,7,2,2); ctx.fillRect(2,13,1,1);
            ctx.fillStyle = '#67e8f9';
            ctx.fillRect(1,5,1,1); ctx.fillRect(13,7,1,1);
            // AI Platform chassis
            ctx.fillStyle = '#0a0f1e'; ctx.fillRect(3,3,10,10);
            ctx.fillStyle = '#0f172a'; ctx.fillRect(3,3,9,9);
            ctx.fillStyle = '#1e293b'; ctx.fillRect(4,4,8,8);
            // Main glowing screen
            const grad = ctx.createLinearGradient(5,5,11,11);
            grad.addColorStop(0, '#0ea5e9');
            grad.addColorStop(0.5, '#06b6d4');
            grad.addColorStop(1, '#22d3ee');
            ctx.fillStyle = grad;
            ctx.fillRect(5,5,6,6);
            // Scan lines
            ctx.fillStyle = 'rgba(103, 232, 249, 0.5)';
            ctx.fillRect(5,5,6,1);
            ctx.fillStyle = 'rgba(103, 232, 249, 0.3)';
            ctx.fillRect(5,6,6,1); ctx.fillRect(5,8,6,1); ctx.fillRect(5,10,6,1);
            // Data bars
            ctx.fillStyle = '#67e8f9';
            ctx.fillRect(6,7,1,3); ctx.fillRect(7,6,1,4);
            ctx.fillRect(9,7,1,3); ctx.fillRect(10,6,1,4);
            // Central AI core
            ctx.fillStyle = '#14b8a6'; ctx.fillRect(7,7,2,3);
            ctx.fillStyle = '#2dd4bf'; ctx.fillRect(8,8,1,2);
            ctx.fillStyle = '#5eead4'; ctx.fillRect(8,8,1,1); // Bright core
            // Risk indicator
            ctx.fillStyle = '#fbbf24'; ctx.fillRect(7,5,2,1);
            ctx.fillStyle = '#fcd34d'; ctx.fillRect(7,5,1,1);
            // Warning light
            ctx.fillStyle = '#ef4444'; ctx.fillRect(10,6,1,1);
            ctx.fillStyle = '#fca5a5'; ctx.fillRect(10,6,1,1);
            // Compliance check
            ctx.fillStyle = '#22c55e'; ctx.fillRect(6,9,1,1);
            ctx.fillRect(7,10,1,1); ctx.fillRect(7,8,1,1);
            // Corner brackets
            ctx.fillStyle = '#0ea5e9';
            ctx.fillRect(3,3,2,1); ctx.fillRect(3,3,1,2); // Top left
            ctx.fillRect(11,3,2,1); ctx.fillRect(12,3,1,2); // Top right
            ctx.fillRect(3,12,2,1); ctx.fillRect(3,11,1,2); // Bottom left
            ctx.fillRect(11,12,2,1); ctx.fillRect(12,11,1,2); // Bottom right
            // Antenna
            ctx.fillStyle = '#475569'; ctx.fillRect(7,1,2,3);
            ctx.fillStyle = '#64748b'; ctx.fillRect(7,1,2,2);
            ctx.fillStyle = '#22d3ee'; ctx.fillRect(7,1,2,1); // Signal
            // Base platform
            ctx.fillStyle = '#1e293b'; ctx.fillRect(4,13,8,2);
            ctx.fillStyle = '#334155'; ctx.fillRect(5,13,6,1);
            ctx.fillStyle = '#0ea5e9'; ctx.fillRect(6,14,1,1); ctx.fillRect(9,14,1,1); // Power
        }
    };

    function renderPortraits() {
        document.querySelectorAll('.char-portrait').forEach(div => {
            const painter = spritePainters[div.dataset.sprite];
            if (!painter) return;
            const spriteCanvas = document.createElement('canvas');
            spriteCanvas.width = 64; spriteCanvas.height = 64;
            const sCtx = spriteCanvas.getContext('2d');
            sCtx.imageSmoothingEnabled = false;
            sCtx.scale(4,4);
            painter(sCtx);
            div.appendChild(spriteCanvas);
        });
    }

    // --- 6. MANUAL MODAL SYSTEM ---
    let currentTab = 0;
    const totalTabs = 8;

    function openManual() {
        document.getElementById('manual-modal').classList.add('active');
        document.body.style.overflow = 'hidden';
        switchTab(0);
    }

    function closeManual() {
        document.getElementById('manual-modal').classList.remove('active');
        document.body.style.overflow = '';
    }

    function switchTab(index) {
        currentTab = index;
        // Update tab buttons
        document.querySelectorAll('.tab-btn').forEach((btn, i) => {
            btn.classList.toggle('active', i === index);
        });
        // Update content
        document.querySelectorAll('.tab-content').forEach((content, i) => {
            content.classList.toggle('active', i === index);
        });
        // Update navigation
        document.getElementById('prev-btn').disabled = index === 0;
        document.getElementById('next-btn').disabled = index === totalTabs - 1;
        document.getElementById('page-indicator').textContent = `Page ${index + 1} of ${totalTabs}`;
        // Scroll to top of modal body
        document.querySelector('.modal-body').scrollTop = 0;
    }

    function prevPage() { if (currentTab > 0) switchTab(currentTab - 1); }
    function nextPage() { if (currentTab < totalTabs - 1) switchTab(currentTab + 1); }

    // Close modal on overlay click or Escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            closeManual();
            closeWhatsNew();
        }
        if (document.getElementById('manual-modal').classList.contains('active')) {
            if (e.key === 'ArrowLeft') prevPage();
            if (e.key === 'ArrowRight') nextPage();
        }
    });

    // --- 7. WHAT'S NEW MODAL SYSTEM ---
    function openWhatsNew() {
        document.getElementById('whatsnew-modal').classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function closeWhatsNew() {
        document.getElementById('whatsnew-modal').classList.remove('active');
        document.body.style.overflow = '';
    }

    fetchAnnouncement();
    renderPortraits();

    // --- 8. LEADERBOARD SYSTEM ---
    // Default highscores fallback for when API is unavailable
    const DEFAULT_HIGHSCORES = [
        { name: "BEZOS", character: "Erwin", bossDefeated: "Mecha Jeff", time: 142, score: 6000 },
        { name: "WHS-1", character: "Roman", bossDefeated: "Mecha Jeff", time: 178, score: 5700 },
        { name: "PRIME", character: "Carrie", bossDefeated: "Mecha Jeff", time: 195, score: 5400 },
        { name: "TPH99", character: "Joao", bossDefeated: "Jelena \"Jelly\"", time: 156, score: 5100 },
        { name: "AUDIT", character: "Nevena", bossDefeated: "Jelena \"Jelly\"", time: 168, score: 4800 },
        { name: "5SGOD", character: "Carrie", bossDefeated: "Regional OPS MGR", time: 145, score: 4500 },
        { name: "SAFE1", character: "Roman", bossDefeated: "Avetta Platform", time: 132, score: 4200 },
        { name: "DVI-1", character: "Erwin", bossDefeated: "Sebastian Sprigade", time: 128, score: 3900 },
        { name: "OSHA", character: "Nevena", bossDefeated: "Compliance Auditor", time: 115, score: 3600 },
        { name: "ANDON", character: "Joao", bossDefeated: "Labour Inspector", time: 105, score: 3000 }
    ];

    function renderLeaderboard(highscores) {
        const container = document.getElementById('leaderboard-content');
        let html = `<table class="leaderboard-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>NAME</th>
                    <th>CHARACTER</th>
                    <th>BOSS DEFEATED</th>
                    <th>TIME</th>
                    <th style="text-align:right;">SCORE</th>
                </tr>
            </thead>
            <tbody>`;

        highscores.forEach((entry, idx) => {
            const rank = idx + 1;
            const rankClass = rank <= 3 ? `rank-${rank}` : '';
            const mins = Math.floor(entry.time / 60);
            const secs = entry.time % 60;
            const timeStr = `${mins}:${secs.toString().padStart(2, '0')}`;

            html += `<tr>
                <td class="rank-col ${rankClass}">${rank}</td>
                <td class="name-col">${escapeHtml(entry.name)}</td>
                <td class="char-col">${escapeHtml(entry.character)}</td>
                <td class="boss-col">${escapeHtml(entry.bossDefeated)}</td>
                <td class="time-col">${timeStr}</td>
                <td class="score-col">${entry.score.toLocaleString()}</td>
            </tr>`;
        });

        html += '</tbody></table>';
        container.innerHTML = html;
    }

    async function fetchLeaderboard() {
        const container = document.getElementById('leaderboard-content');
        try {
            const res = await fetch('/.netlify/functions/highscores');
            if (!res.ok) throw new Error('Failed to fetch');
            const data = await res.json();

            if (!data.success || !data.highscores || data.highscores.length === 0) {
                // Use defaults if API returns empty
                renderLeaderboard(DEFAULT_HIGHSCORES);
                return;
            }

            renderLeaderboard(data.highscores);
        } catch (err) {
            console.error('Leaderboard fetch error:', err);
            // Fall back to default highscores instead of showing error
            renderLeaderboard(DEFAULT_HIGHSCORES);
        }
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    fetchLeaderboard();
</script>

<!-- MANUAL MODAL -->
<div id="manual-modal" class="modal-overlay" onclick="if(event.target === this) closeManual()">
    <div class="modal-container">
        <div class="modal-header">
            <h2 class="modal-title">üìñ AMZL WHS QUEST</h2>
            <div class="modal-subtitle">OFFICIAL INSTRUCTION MANUAL ‚Ä¢ v12.2.5</div>
            <button class="modal-close" onclick="closeManual()">‚úï</button>
        </div>

        <div class="modal-tabs">
            <button class="tab-btn active" onclick="switchTab(0)">1. STORY</button>
            <button class="tab-btn" onclick="switchTab(1)">2. START</button>
            <button class="tab-btn" onclick="switchTab(2)">3. CONTROLS</button>
            <button class="tab-btn" onclick="switchTab(3)">4. HEROES</button>
            <button class="tab-btn" onclick="switchTab(4)">5. ENEMIES</button>
            <button class="tab-btn" onclick="switchTab(5)">6. ITEMS</button>
            <button class="tab-btn" onclick="switchTab(6)">7. TIPS</button>
            <button class="tab-btn" onclick="switchTab(7)">8. LEGAL</button>
        </div>

        <div class="modal-body">
            <!-- TAB 1: STORY -->
            <div class="tab-content active">
                <div class="manual-page-title" style="color: #ff4444;">THE STORY SO FAR</div>
                <div style="color: #e2e8f0; font-size: 1.1rem; line-height: 1.8;">
                    <p style="text-indent: 30px;">
                        The year is <span style="color: #fbbf24;">2025</span>. The place: <span style="color: #22d3ee;">Delivery Station DVI1, Vienna</span>.
                        You are a freshly minted <span style="color: #fbbf24;">Tier 1 WHS Coordinator</span> ‚Äî which is corporate speak
                        for "the person who gets blamed when someone trips over a banana peel."
                    </p>
                    <p style="text-indent: 30px; margin-top: 15px;">
                        The warehouse is in <span style="color: #ff4444;">CHAOS</span>. Ops Managers roam the floor demanding
                        impossible rates. Hazards multiply like rabbits. And somewhere, somehow, someone
                        keeps blocking the fire exits with empty pallets.
                    </p>
                    <p style="text-indent: 30px; margin-top: 15px;">
                        Your mission? <span style="color: #22c55e;">Find and eliminate 5 safety hazards</span> before the
                        inevitable audit. Arm yourself with <span style="color: #22d3ee;">RULE BOOKS</span>, dodge the
                        requests of productivity-obsessed managers, and pray that someone finally
                        refills the coffee machine.
                    </p>
                    <div style="text-align: center; margin-top: 25px; padding: 15px; background: rgba(255, 153, 0, 0.1); border: 1px solid #ff9900; border-radius: 4px;">
                        <span style="color: #ff9900; font-style: italic;">
                            "Safety is everyone's responsibility. Especially yours. Only yours, actually."<br>
                            ‚Äî Anonymous Regional Manager, probably
                        </span>
                    </div>
                    <div style="margin-top: 25px; padding: 15px; background: rgba(255, 153, 0, 0.05); border: 1px dashed #ff9900; border-radius: 4px; text-align: center;">
                        <span style="color: #ff9900; font-size: 0.9rem;">
                            ‚ö†Ô∏è WARNING: This game may cause flashbacks to actual warehouse shifts.<br>
                            Side effects include: involuntary TPH calculations, clipboard nightmares, and sudden urges to straighten boxes.
                        </span>
                    </div>
                </div>
            </div>

            <!-- TAB 2: GETTING STARTED -->
            <div class="tab-content">
                <div class="manual-page-title" style="color: #22c55e;">GETTING STARTED</div>
                <div style="color: #e2e8f0; font-size: 1.1rem; line-height: 1.8;">
                    <div style="color: #fbbf24; font-weight: bold; margin-bottom: 10px;">SYSTEM REQUIREMENTS:</div>
                    <ul style="margin-left: 20px; color: #94a3b8;">
                        <li>A keyboard (preferably one that still works after your last audit)</li>
                        <li>Functioning eyes (safety glasses recommended)</li>
                        <li>Caffeine levels: HIGH to CRITICAL</li>
                        <li>Patience levels: Optional (but recommended)</li>
                    </ul>
                    <div style="color: #fbbf24; font-weight: bold; margin-top: 25px; margin-bottom: 10px;">HOW TO START:</div>
                    <ol style="margin-left: 20px; color: #94a3b8;">
                        <li>Click <span style="color: #ff9900;">START SHIFT</span> (there's no going back now)</li>
                        <li>Watch the intro (or press SPACE if you've seen it 47 times)</li>
                        <li>Select your character (choose wisely, or don't, we're not your supervisor)</li>
                        <li>Begin your shift and try not to cry</li>
                    </ol>
                    <div style="color: #fbbf24; font-weight: bold; margin-top: 25px; margin-bottom: 10px;">OBJECTIVE:</div>
                    <div style="padding: 15px; background: rgba(34, 197, 94, 0.1); border: 2px solid #22c55e; border-radius: 4px;">
                        <span style="color: #22c55e;">
                            üéØ Find and fix <span style="font-weight: bold;">5 SAFETY HAZARDS</span> scattered across the warehouse floor.<br><br>
                            üéØ Survive encounters with <span style="font-weight: bold;">VISITOR BOSSES</span> who show up unannounced.<br><br>
                            üéØ Maintain your sanity (bonus objective, not required for completion).
                        </span>
                    </div>
                </div>
            </div>

            <!-- TAB 3: CONTROLS -->
            <div class="tab-content">
                <div class="manual-page-title" style="color: #22d3ee;">CONTROLS</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-top: 15px;">
                    <div style="background: rgba(34, 211, 238, 0.1); padding: 20px; border: 2px solid #22d3ee; border-radius: 4px; text-align: center;">
                        <div style="color: #22d3ee; font-family: 'Press Start 2P', cursive; font-size: 0.7rem; margin-bottom: 10px;">MOVEMENT</div>
                        <div style="font-size: 2rem; margin: 10px 0; color: #fbbf24;">W A S D</div>
                        <div style="color: #64748b; font-size: 0.9rem;">‚Äî or ‚Äî</div>
                        <div style="font-size: 1.5rem; margin: 10px 0; color: #fbbf24;">‚Üë ‚Üê ‚Üì ‚Üí</div>
                        <div style="color: #94a3b8; font-size: 0.9rem;">Move your character</div>
                    </div>
                    <div style="background: rgba(255, 68, 68, 0.1); padding: 20px; border: 2px solid #ff4444; border-radius: 4px; text-align: center;">
                        <div style="color: #ff4444; font-family: 'Press Start 2P', cursive; font-size: 0.7rem; margin-bottom: 10px;">ATTACK</div>
                        <div style="font-size: 2rem; margin: 10px 0; color: #fbbf24;">SPACE</div>
                        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 15px;">Fire your signature attack!<br><span style="color: #22d3ee; font-size: 0.8rem;">(Each hero has unique weapon)</span></div>
                    </div>
                    <div style="background: rgba(251, 191, 36, 0.1); padding: 20px; border: 2px solid #fbbf24; border-radius: 4px; text-align: center;">
                        <div style="color: #fbbf24; font-family: 'Press Start 2P', cursive; font-size: 0.7rem; margin-bottom: 10px;">SKIP/CONFIRM</div>
                        <div style="font-size: 2rem; margin: 10px 0; color: #fbbf24;">SPACE</div>
                        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 15px;">Skip dialogue, advance text,<br><span style="color: #64748b; font-size: 0.8rem;">or tell Simon to hurry up</span></div>
                    </div>
                </div>
                <div style="margin-top: 25px; padding: 15px; background: rgba(255, 153, 0, 0.1); border: 1px dashed #ff9900; border-radius: 4px; text-align: center;">
                    <span style="color: #ff9900; font-size: 0.95rem;">
                        üí° PRO TIP: Your attacks shoot in the direction you're moving!<br>
                        Stand still to fire at the last direction you faced.<br>
                        <span style="color: #64748b;">(Just like real safety audits ‚Äî always keep moving!)</span>
                    </span>
                </div>
            </div>

            <!-- TAB 4: HEROES -->
            <div class="tab-content">
                <div class="manual-page-title" style="color: #a855f7;">YOUR HEROES</div>
                <p style="margin-bottom: 20px; color: #94a3b8; font-style: italic;">
                    Choose your warrior! Each member of the WHS Austria team brings unique abilities to the warehouse floor.
                </p>
                <div style="display: grid; gap: 12px;">
                    <div style="background: linear-gradient(90deg, rgba(168, 85, 247, 0.2) 0%, transparent 100%); padding: 12px; border-left: 4px solid #a855f7; border-radius: 0 4px 4px 0;">
                        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 5px;">
                            <div><span style="color: #a855f7; font-family: 'Press Start 2P', cursive; font-size: 0.7rem;">CARRIE</span> <span style="color: #fbbf24;">„ÄåTHE 5S MONK„Äç</span></div>
                            <span style="color: #22c55e; font-size: 0.85rem;">‚öîÔ∏è Label Maker Burst</span>
                        </div>
                        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 6px;">
                            <span style="color: #fbbf24;">ABILITY:</span> PRECISION FOCUS ‚Äî <span style="color: #22c55e;">2x boss damage</span>, 30% slower reload.<br>
                            <span style="color: #64748b; font-style: italic;">Best for: Quality > quantity players. Label enthusiasts.</span>
                        </div>
                    </div>
                    <div style="background: linear-gradient(90deg, rgba(14, 165, 233, 0.2) 0%, transparent 100%); padding: 12px; border-left: 4px solid #0ea5e9; border-radius: 0 4px 4px 0;">
                        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 5px;">
                            <div><span style="color: #0ea5e9; font-family: 'Press Start 2P', cursive; font-size: 0.7rem;">NEVENA</span> <span style="color: #fbbf24;">„ÄåTHE ORACLE„Äç</span></div>
                            <span style="color: #22c55e; font-size: 0.85rem;">‚öîÔ∏è Clipboard Shockwave</span>
                        </div>
                        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 6px;">
                            <span style="color: #fbbf24;">ABILITY:</span> FORESIGHT ‚Äî <span style="color: #22c55e;">Longer invincibility</span> after damage.<br>
                            <span style="color: #64748b; font-style: italic;">Best for: Players who make mistakes gracefully.</span>
                        </div>
                    </div>
                    <div style="background: linear-gradient(90deg, rgba(249, 115, 22, 0.2) 0%, transparent 100%); padding: 12px; border-left: 4px solid #f97316; border-radius: 0 4px 4px 0;">
                        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 5px;">
                            <div><span style="color: #f97316; font-family: 'Press Start 2P', cursive; font-size: 0.7rem;">JOAO</span> <span style="color: #fbbf24;">„ÄåTHE SIREN„Äç</span></div>
                            <span style="color: #22c55e; font-size: 0.85rem;">‚öîÔ∏è Sonic Shout</span>
                        </div>
                        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 6px;">
                            <span style="color: #fbbf24;">ABILITY:</span> CAFFEINE RUSH ‚Äî <span style="color: #22c55e;">Faster attack cooldown.</span><br>
                            <span style="color: #64748b; font-style: italic;">Best for: MORE OFFENSE is the best defense!</span>
                        </div>
                    </div>
                    <div style="background: linear-gradient(90deg, rgba(148, 163, 184, 0.2) 0%, transparent 100%); padding: 12px; border-left: 4px solid #94a3b8; border-radius: 0 4px 4px 0;">
                        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 5px;">
                            <div><span style="color: #94a3b8; font-family: 'Press Start 2P', cursive; font-size: 0.7rem;">ROMAN</span> <span style="color: #fbbf24;">„ÄåTHE GHOST„Äç</span></div>
                            <span style="color: #22c55e; font-size: 0.85rem;">‚öîÔ∏è Stealth Audit Pulse</span>
                        </div>
                        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 6px;">
                            <span style="color: #fbbf24;">ABILITY:</span> PHANTOM STEP ‚Äî <span style="color: #22c55e;">Smaller collision radius.</span><br>
                            <span style="color: #64748b; font-style: italic;">Best for: Dodging responsibility AND projectiles.</span>
                        </div>
                    </div>
                    <div style="background: linear-gradient(90deg, rgba(34, 211, 238, 0.2) 0%, transparent 100%); padding: 12px; border-left: 4px solid #22d3ee; border-radius: 0 4px 4px 0;">
                        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 5px;">
                            <div><span style="color: #22d3ee; font-family: 'Press Start 2P', cursive; font-size: 0.7rem;">ERWIN</span> <span style="color: #fbbf24;">„ÄåTHE MANAGER„Äç</span></div>
                            <span style="color: #22c55e; font-size: 0.85rem;">‚öîÔ∏è Tesla Energy Pulse</span>
                        </div>
                        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 6px;">
                            <span style="color: #fbbf24;">ABILITY:</span> TESLA RUSH ‚Äî <span style="color: #22c55e;">30% faster</span>, but <span style="color: #ff4444;">1 LIFE ONLY!</span><br>
                            <span style="color: #64748b; font-style: italic;">Best for: Speed runners. YOLO mode activated.</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 5: ENEMIES -->
            <div class="tab-content">
                <div class="manual-page-title" style="color: #ff4444;">ENEMIES & VISITORS</div>
                <div style="color: #fbbf24; font-family: 'Press Start 2P', cursive; font-size: 0.65rem; margin-bottom: 15px;">REGULAR ENEMIES</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-bottom: 25px;">
                    <div style="background: rgba(255, 204, 0, 0.1); padding: 12px; border: 1px solid #ffcc00; border-radius: 4px;">
                        <div style="color: #ffcc00; font-weight: bold;">OPS MANAGERS</div>
                        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 5px;">They want RATES! Hit them to convert to Associates. <span style="color: #ff4444;">‚ö†Ô∏è 10% deflect chance!</span></div>
                    </div>
                    <div style="background: rgba(150, 150, 150, 0.1); padding: 12px; border: 1px solid #999; border-radius: 4px;">
                        <div style="color: #aaa; font-weight: bold;">ASSOCIATES</div>
                        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 5px;">Harmless workers. Will slowly revert to Ops Managers if left alone.</div>
                    </div>
                </div>
                <div style="color: #ff4444; font-family: 'Press Start 2P', cursive; font-size: 0.65rem; margin-bottom: 15px;">VISITOR BOSSES</div>
                <p style="color: #94a3b8; font-style: italic; margin-bottom: 12px; font-size: 0.9rem;">
                    Each boss has unique attacks and a <span style="color: #ff4444;">DESPERATION PHASE</span> at low HP!
                </p>
                <div style="display: grid; gap: 8px;">
                    <div style="display: flex; gap: 10px; padding: 8px; background: rgba(255, 68, 68, 0.1); border-left: 3px solid #ff4444;">
                        <span style="color: #ff4444; min-width: 130px; font-size: 0.9rem;">LABOUR INSPECTOR</span>
                        <span style="color: #64748b; font-size: 0.85rem;">The Enforcer ‚Äî 11-shot sweeping lines</span>
                    </div>
                    <div style="display: flex; gap: 10px; padding: 8px; background: rgba(255, 68, 68, 0.05); border-left: 3px solid #ff4444;">
                        <span style="color: #ff4444; min-width: 130px; font-size: 0.9rem;">COMPLIANCE</span>
                        <span style="color: #64748b; font-size: 0.85rem;">The Auditor ‚Äî Homing grid attacks</span>
                    </div>
                    <div style="display: flex; gap: 10px; padding: 8px; background: rgba(255, 68, 68, 0.1); border-left: 3px solid #ff4444;">
                        <span style="color: #ff4444; min-width: 130px; font-size: 0.9rem;">SEBASTIAN</span>
                        <span style="color: #64748b; font-size: 0.85rem;">Station Commander ‚Äî 10-shot rapid barrages</span>
                    </div>
                    <div style="display: flex; gap: 10px; padding: 8px; background: rgba(255, 68, 68, 0.05); border-left: 3px solid #ff4444;">
                        <span style="color: #ff4444; min-width: 130px; font-size: 0.9rem;">REGIONAL OPS MGR</span>
                        <span style="color: #64748b; font-size: 0.85rem;">The Executive ‚Äî Dual rotating rings (16!)</span>
                    </div>
                    <div style="display: flex; gap: 10px; padding: 8px; background: rgba(255, 68, 68, 0.1); border-left: 3px solid #ff4444;">
                        <span style="color: #ff4444; min-width: 130px; font-size: 0.9rem;">AVETTA AI</span>
                        <span style="color: #64748b; font-size: 0.85rem;">The Algorithm ‚Äî Cross laser patterns</span>
                    </div>
                    <div style="display: flex; gap: 10px; padding: 8px; background: rgba(255, 68, 68, 0.05); border-left: 3px solid #ff4444;">
                        <span style="color: #ff4444; min-width: 130px; font-size: 0.9rem;">JELENA "JELLY"</span>
                        <span style="color: #64748b; font-size: 0.85rem;">HR Sentinel ‚Äî 7-wave cascade</span>
                    </div>
                </div>
                <div style="margin-top: 20px; padding: 15px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(236, 72, 153, 0.2) 100%); border: 2px dashed #8b5cf6; border-radius: 4px; text-align: center;">
                    <div style="color: #c4b5fd; font-family: 'Press Start 2P', cursive; font-size: 0.55rem; margin-bottom: 8px;">??? CLASSIFIED INTEL ???</div>
                    <div style="color: #a78bfa; font-size: 0.95rem;">
                        Rumors speak of <span style="color: #f472b6; font-weight: bold;">TWO SECRET BOSSES</span> hidden beyond the warehouse...<br>
                        <span style="color: #64748b; font-size: 0.85rem; font-style: italic;">One has "evolved" beyond normal form... The other? Not from around here. üöÄ</span>
                    </div>
                    <div style="color: #64748b; font-size: 0.75rem; margin-top: 8px;">[ CLEARANCE: PIZZA PARTY REQUIRED ]</div>
                </div>
            </div>

            <!-- TAB 6: ITEMS -->
            <div class="tab-content">
                <div class="manual-page-title" style="color: #22c55e;">ITEMS & POWER-UPS</div>
                <div style="color: #fbbf24; font-family: 'Press Start 2P', cursive; font-size: 0.65rem; margin-bottom: 15px;">HAZARDS TO FIND</div>
                <p style="color: #94a3b8; margin-bottom: 12px; font-size: 0.9rem;">Walk over hazards to fix them. Find all 5 to win!</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; margin-bottom: 25px;">
                    <div style="background: rgba(251, 191, 36, 0.1); padding: 10px; border: 1px solid #fbbf24; border-radius: 4px; text-align: center;">
                        <div style="font-size: 1.5rem;">üì¶</div>
                        <div style="color: #fbbf24; font-size: 0.8rem;">Blocked Exit</div>
                    </div>
                    <div style="background: rgba(251, 191, 36, 0.1); padding: 10px; border: 1px solid #fbbf24; border-radius: 4px; text-align: center;">
                        <div style="font-size: 1.5rem;">‚ö°</div>
                        <div style="color: #fbbf24; font-size: 0.8rem;">Exposed Wire</div>
                    </div>
                    <div style="background: rgba(251, 191, 36, 0.1); padding: 10px; border: 1px solid #fbbf24; border-radius: 4px; text-align: center;">
                        <div style="font-size: 1.5rem;">üíß</div>
                        <div style="color: #fbbf24; font-size: 0.8rem;">Spill Zone</div>
                    </div>
                    <div style="background: rgba(251, 191, 36, 0.1); padding: 10px; border: 1px solid #fbbf24; border-radius: 4px; text-align: center;">
                        <div style="font-size: 1.5rem;">üîß</div>
                        <div style="color: #fbbf24; font-size: 0.8rem;">Unstable Rack</div>
                    </div>
                    <div style="background: rgba(251, 191, 36, 0.1); padding: 10px; border: 1px solid #fbbf24; border-radius: 4px; text-align: center;">
                        <div style="font-size: 1.5rem;">‚òï</div>
                        <div style="color: #fbbf24; font-size: 0.8rem;">Coffee Doom</div>
                    </div>
                </div>
                <div style="color: #22c55e; font-family: 'Press Start 2P', cursive; font-size: 0.65rem; margin-bottom: 15px;">POWER-UPS (YARD LEVEL)</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px;">
                    <div style="background: rgba(59, 130, 246, 0.1); padding: 12px; border: 2px solid #3b82f6; border-radius: 4px;">
                        <div style="color: #3b82f6; font-weight: bold;">‚ö° SPEED BOOST</div>
                        <div style="color: #94a3b8; font-size: 0.85rem; margin-top: 5px;">5 seconds of zoom-zoom energy!</div>
                    </div>
                    <div style="background: rgba(168, 85, 247, 0.1); padding: 12px; border: 2px solid #a855f7; border-radius: 4px;">
                        <div style="color: #a855f7; font-weight: bold;">üõ°Ô∏è SHIELD</div>
                        <div style="color: #94a3b8; font-size: 0.85rem; margin-top: 5px;">3 seconds of invincibility!</div>
                    </div>
                    <div style="background: rgba(239, 68, 68, 0.1); padding: 12px; border: 2px solid #ef4444; border-radius: 4px;">
                        <div style="color: #ef4444; font-weight: bold;">‚ù§Ô∏è EXTRA LIFE</div>
                        <div style="color: #94a3b8; font-size: 0.85rem; margin-top: 5px;">One more chance!</div>
                    </div>
                    <div style="background: rgba(251, 191, 36, 0.1); padding: 12px; border: 2px solid #fbbf24; border-radius: 4px;">
                        <div style="color: #fbbf24; font-weight: bold;">üì¶ BONUS PKG</div>
                        <div style="color: #94a3b8; font-size: 0.85rem; margin-top: 5px;">Extra points!</div>
                    </div>
                </div>
            </div>

            <!-- TAB 7: TIPS -->
            <div class="tab-content">
                <div class="manual-page-title" style="color: #f97316;">TIPS FROM THE PROS</div>
                <div style="display: grid; gap: 12px;">
                    <div style="padding: 12px; background: rgba(249, 115, 22, 0.1); border-left: 4px solid #f97316; border-radius: 0 4px 4px 0;">
                        <span style="color: #f97316; font-weight: bold;">TIP #1:</span>
                        <span style="color: #94a3b8;"> Keep moving! A stationary target is a written warning waiting to happen.</span>
                    </div>
                    <div style="padding: 12px; background: rgba(249, 115, 22, 0.05); border-left: 4px solid #f97316; border-radius: 0 4px 4px 0;">
                        <span style="color: #f97316; font-weight: bold;">TIP #2:</span>
                        <span style="color: #94a3b8;"> Watch for <span style="color: #ff4444;">DESPERATION PHASE</span> at 40% HP. That's when things get SPICY.</span>
                    </div>
                    <div style="padding: 12px; background: rgba(249, 115, 22, 0.1); border-left: 4px solid #f97316; border-radius: 0 4px 4px 0;">
                        <span style="color: #f97316; font-weight: bold;">TIP #3:</span>
                        <span style="color: #94a3b8;"> Ops Managers can DEFLECT 10% of attacks. It's infuriating. We know.</span>
                    </div>
                    <div style="padding: 12px; background: rgba(249, 115, 22, 0.05); border-left: 4px solid #f97316; border-radius: 0 4px 4px 0;">
                        <span style="color: #f97316; font-weight: bold;">TIP #4:</span>
                        <span style="color: #94a3b8;"> Carrie's 2x boss damage = speed runs. Just don't miss‚Äîreload is slow as IT tickets.</span>
                    </div>
                    <div style="padding: 12px; background: rgba(249, 115, 22, 0.1); border-left: 4px solid #f97316; border-radius: 0 4px 4px 0;">
                        <span style="color: #f97316; font-weight: bold;">TIP #5:</span>
                        <span style="color: #94a3b8;"> Erwin = HIGH RISK, HIGH REWARD. One life. Maximum speed. Peak Snake energy.</span>
                    </div>
                    <div style="padding: 12px; background: rgba(249, 115, 22, 0.05); border-left: 4px solid #f97316; border-radius: 0 4px 4px 0;">
                        <span style="color: #f97316; font-weight: bold;">TIP #6:</span>
                        <span style="color: #94a3b8;"> Listen to the music! When it intensifies, something's about to go down. Probably your HP.</span>
                    </div>
                    <div style="padding: 12px; background: rgba(249, 115, 22, 0.1); border-left: 4px solid #f97316; border-radius: 0 4px 4px 0;">
                        <span style="color: #f97316; font-weight: bold;">TIP #7:</span>
                        <span style="color: #94a3b8;"> That fire exit in the corner? ...Probably nothing. Definitely don't investigate it. üëÄ</span>
                    </div>
                </div>
            </div>

            <!-- TAB 8: LEGAL -->
            <div class="tab-content">
                <div class="manual-page-title" style="color: #64748b;">WARRANTY & LEGAL</div>
                <div style="color: #64748b; font-size: 0.95rem; line-height: 1.8;">
                    <p style="text-transform: uppercase; font-size: 0.8rem; margin-bottom: 15px; color: #94a3b8;">LIMITED WARRANTY AGREEMENT</p>
                    <p>ERWIN ESENER PRODUCTIONS ("we," "us," "the people who made this instead of sleeping") warrants that this game will provide approximately 0 to ‚àû hours of entertainment value, depending on your tolerance for warehouse-based humor.</p>
                    <p style="margin-top: 15px; color: #ff4444;">THIS WARRANTY DOES NOT COVER:</p>
                    <ul style="margin-left: 20px; margin-top: 10px; color: #94a3b8;">
                        <li>Emotional damage from boss desperation phases</li>
                        <li>Carpal tunnel from excessive rule book throwing</li>
                        <li>Existential crises about actual warehouse jobs</li>
                        <li>Lost productivity (were you being productive anyway?)</li>
                        <li>Any resemblance to real persons, living or auditing</li>
                    </ul>
                    <p style="margin-top: 20px; padding: 12px; background: rgba(100, 116, 139, 0.1); border: 1px solid #64748b; border-radius: 4px;">
                        <span style="color: #fbbf24;">FOR CUSTOMER SUPPORT:</span><br>
                        Please submit a ticket, then wait 3-5 business days while we "escalate" your issue to someone who also doesn't know the answer. Just like real life!
                    </p>
                    <div style="text-align: center; margin-top: 25px; padding: 15px; border-top: 2px solid #334155;">
                        <div style="color: #fbbf24; font-size: 1rem;">Thank you for playing!</div>
                        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 8px;">
                            ¬© 2025 ERWIN ESENER PRODUCTIONS<br>
                            WHS MEU ‚Ä¢ DVI1 VIENNA<br>
                            <span style="font-size: 0.8rem;">All Rights Reserved ‚Ä¢ Safety First ‚Ä¢ Rates Second</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-footer">
            <button id="prev-btn" class="nav-btn" onclick="prevPage()" disabled>‚óÑ PREV</button>
            <span id="page-indicator" class="page-indicator">Page 1 of 8</span>
            <button id="next-btn" class="nav-btn" onclick="nextPage()">NEXT ‚ñ∫</button>
        </div>
    </div>
</div>

<!-- WHAT'S NEW MODAL -->
<div id="whatsnew-modal" class="modal-overlay" onclick="if(event.target === this) closeWhatsNew()" style="--accent-color: #14b8a6;">
    <div class="modal-container" style="border-color: #14b8a6; max-width: 850px;">
        <div class="modal-header" style="border-bottom-color: #14b8a6;">
            <h2 class="modal-title" style="color: #5eead4;">üöÄ RELEASE NOTES</h2>
            <div class="modal-subtitle">Q4 2025 OPERATIONAL EXCELLENCE DEPLOYMENT ‚Ä¢ v12.3.0</div>
            <button class="modal-close" onclick="closeWhatsNew()">‚úï</button>
        </div>

        <div class="modal-body" style="padding: 30px;">
            <!-- LEADERSHIP MESSAGE -->
            <div style="background: linear-gradient(135deg, rgba(20, 184, 166, 0.1) 0%, rgba(15, 118, 110, 0.15) 100%); border: 2px solid #14b8a6; border-radius: 8px; padding: 25px; margin-bottom: 25px;">
                <div style="color: #5eead4; font-family: 'Press Start 2P', cursive; font-size: 0.8rem; margin-bottom: 15px; text-shadow: 0 0 10px rgba(94, 234, 212, 0.5);">üìã MESSAGE FROM LEADERSHIP</div>
                <p style="color: #e2e8f0; line-height: 1.8; margin: 0; font-size: 1.05rem;">
                    Dear Valued Associates and Stakeholders,<br><br>
                    We are <span style="color: #fbbf24;">thrilled to announce</span> the deployment of our latest operational enhancements.
                    These customer-obsessed improvements represent a <span style="color: #14b8a6;">paradigm shift</span> in warehouse safety gamification,
                    driving <span style="color: #22c55e;">synergistic outcomes</span> across all verticals.<br><br>
                    <span style="color: #94a3b8; font-style: italic;">‚Äî The AMZL WHS Quest Leadership Team</span>
                </p>
            </div>

            <!-- MOBILE GAMING INITIATIVE -->
            <div style="margin-bottom: 30px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #334155; padding-bottom: 15px;">
                    <span style="color: #00d4ff; font-size: 1.5rem;">üì±</span>
                    <div>
                        <div style="color: #00d4ff; font-family: 'Press Start 2P', cursive; font-size: 0.75rem;">MOBILE-FIRST ACCESSIBILITY INITIATIVE</div>
                        <div style="color: #94a3b8; font-size: 0.85rem; margin-top: 5px;">Cross-Platform Associate Engagement Framework</div>
                    </div>
                </div>

                <div style="display: grid; gap: 15px;">
                    <div style="background: rgba(0,0,0,0.3); padding: 18px; border-radius: 6px; border-left: 4px solid #00d4ff;">
                        <div style="color: #00d4ff; font-weight: bold; margin-bottom: 8px;">üéÆ ON-SCREEN CONTROL DEPLOYMENT</div>
                        <p style="margin: 0; color: #cbd5e1; line-height: 1.6;">
                            We've implemented a <span style="color: #00d4ff;">customer-obsessed mobile interface</span> featuring a
                            <span style="color: #22c55e;">retro D-pad directional input system</span> and
                            <span style="color: #ff4444;">high-impact action button</span> for seamless gameplay on iOS and Android devices.
                            Associates can now drive safety excellence outcomes <span style="color: #fbbf24;">anytime, anywhere</span>.
                        </p>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); padding: 18px; border-radius: 6px; border-left: 4px solid #a855f7;">
                        <div style="color: #a855f7; font-weight: bold; margin-bottom: 8px;">üì≥ HAPTIC FEEDBACK INTEGRATION</div>
                        <p style="margin: 0; color: #cbd5e1; line-height: 1.6;">
                            Leveraging device-native <span style="color: #a855f7;">vibration APIs</span> to deliver
                            <span style="color: #fbbf24;">tactile engagement touchpoints</span> aligned with key gameplay moments:
                        </p>
                        <ul style="margin: 10px 0 0 20px; color: #94a3b8;">
                            <li><span style="color: #fbbf24;">Light pulse:</span> Movement input acknowledgment</li>
                            <li><span style="color: #fbbf24;">Medium burst:</span> Attack execution confirmation</li>
                            <li><span style="color: #fbbf24;">Pattern sequence:</span> Damage received notification</li>
                            <li><span style="color: #fbbf24;">Intense cascade:</span> Boss encounter escalation</li>
                        </ul>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); padding: 18px; border-radius: 6px; border-left: 4px solid #22c55e;">
                        <div style="color: #22c55e; font-weight: bold; margin-bottom: 8px;">üìê RESPONSIVE VIEWPORT OPTIMIZATION</div>
                        <p style="margin: 0; color: #cbd5e1; line-height: 1.6;">
                            The game canvas now <span style="color: #22c55e;">dynamically scales</span> to accommodate various screen form factors,
                            ensuring <span style="color: #14b8a6;">pixel-perfect visual fidelity</span> across smartphones, tablets, and desktop displays.
                            <span style="color: #94a3b8;">No associate left behind.</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- ENHANCED BOSS COMBAT INITIATIVE -->
            <div style="margin-bottom: 30px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #334155; padding-bottom: 15px;">
                    <span style="color: #ff4444; font-size: 1.5rem;">‚öîÔ∏è</span>
                    <div>
                        <div style="color: #ff4444; font-family: 'Press Start 2P', cursive; font-size: 0.75rem;">ENHANCED VISITOR ENGAGEMENT INITIATIVE</div>
                        <div style="color: #94a3b8; font-size: 0.85rem; margin-top: 5px;">Reimagined Stakeholder Interaction Framework</div>
                    </div>
                </div>

                <div style="display: grid; gap: 15px;">
                    <div style="background: rgba(0,0,0,0.3); padding: 18px; border-radius: 6px; border-left: 4px solid #fbbf24;">
                        <div style="color: #fbbf24; font-weight: bold; margin-bottom: 8px;">üí™ OPTIMIZED VISITOR RESILIENCE METRICS</div>
                        <p style="margin: 0; color: #cbd5e1; line-height: 1.6;">
                            We've <span style="color: #fbbf24;">right-sized</span> the visitor durability framework, implementing a
                            <span style="color: #22c55e;">150-300% enhancement</span> to stakeholder health pools (25-50 HP).
                            This enables <span style="color: #14b8a6;">extended customer touchpoints</span> and more meaningful engagement windows.
                        </p>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); padding: 18px; border-radius: 6px; border-left: 4px solid #ff4444;">
                        <div style="color: #ff4444; font-weight: bold; margin-bottom: 8px;">‚ö° DIFFERENTIATED FEEDBACK DELIVERY SYSTEMS</div>
                        <p style="margin: 0; color: #cbd5e1; line-height: 1.6;">
                            Each visitor now leverages <span style="color: #ff4444;">bespoke communication patterns</span> to drive alignment:
                        </p>
                        <ul style="margin: 10px 0 0 20px; color: #94a3b8;">
                            <li><span style="color: #fbbf24;">Inspector:</span> 11-point sweeping line delivery framework</li>
                            <li><span style="color: #fbbf24;">Auditor:</span> Homing grid synergy (6 touchpoints)</li>
                            <li><span style="color: #fbbf24;">Sebastian:</span> 10-shot rapid barrage cadence optimization</li>
                            <li><span style="color: #fbbf24;">Regional:</span> Dual rotating ring stakeholder outreach (16!)</li>
                            <li><span style="color: #fbbf24;">Avetta:</span> Cross-functional laser alignment pattern</li>
                            <li><span style="color: #fbbf24;">Jelena:</span> 7-wave cascade delivery methodology</li>
                            <li><span style="color: #fbbf24;">Mega Simon:</span> 14-projectile chaos vortex (maximum disruption)</li>
                        </ul>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); padding: 18px; border-radius: 6px; border-left: 4px solid #dc2626;">
                        <div style="color: #dc2626; font-weight: bold; margin-bottom: 8px;">üí• PROACTIVE ESCALATION PROTOCOL (40% THRESHOLD)</div>
                        <p style="margin: 0; color: #cbd5e1; line-height: 1.6;">
                            At <span style="color: #dc2626;">40% resource depletion</span>, visitors now trigger our new
                            <span style="color: #ff4444;">"DESPERATION" escalation pathway</span>. This includes: massive screen shake for visibility optimization,
                            visual flash for attention capture, warning signage deployment, and an <span style="color: #ff0000;">absolutely devastating ultimate feedback mechanism</span>
                            (15-30 concurrent communications). Triple alert sounds. Particle-based visual indicators. Maximum stakeholder awareness.
                        </p>
                    </div>
                </div>
            </div>

            <!-- OPERATIONAL IMPROVEMENTS -->
            <div style="margin-bottom: 30px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #334155; padding-bottom: 15px;">
                    <span style="color: #22c55e; font-size: 1.5rem;">üìà</span>
                    <div>
                        <div style="color: #22c55e; font-family: 'Press Start 2P', cursive; font-size: 0.75rem;">OPERATIONAL EXCELLENCE INITIATIVES</div>
                        <div style="color: #94a3b8; font-size: 0.85rem; margin-top: 5px;">Continuous Improvement Deployments</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px;">
                    <div style="background: rgba(34, 197, 94, 0.1); padding: 18px; border: 1px solid #22c55e; border-radius: 6px;">
                        <div style="color: #22c55e; font-weight: bold; margin-bottom: 8px;">üè¢ FACILITY BRANDING ALIGNMENT</div>
                        <p style="margin: 0; color: #94a3b8; font-size: 0.95rem; line-height: 1.5;">
                            Enhanced warehouse visuals now feature <span style="color: #22c55e;">Amazon DVI1 Austria branding</span> for improved site identification and associate belonging metrics.
                        </p>
                    </div>

                    <div style="background: rgba(34, 211, 238, 0.1); padding: 18px; border: 1px solid #22d3ee; border-radius: 6px;">
                        <div style="color: #22d3ee; font-weight: bold; margin-bottom: 8px;">üìñ KNOWLEDGE BASE EXPANSION</div>
                        <p style="margin: 0; color: #94a3b8; font-size: 0.95rem; line-height: 1.5;">
                            Deployed a <span style="color: #22d3ee;">retro SNES-style instruction manual</span> with sleek modal navigation to empower associate onboarding journeys.
                        </p>
                    </div>

                    <div style="background: rgba(168, 85, 247, 0.1); padding: 18px; border: 1px solid #a855f7; border-radius: 6px;">
                        <div style="color: #a855f7; font-weight: bold; margin-bottom: 8px;">üéµ AUDIO EXPERIENCE OPTIMIZATION</div>
                        <p style="margin: 0; color: #94a3b8; font-size: 0.95rem; line-height: 1.5;">
                            Fixed song timing alignment and added <span style="color: #a855f7;">secret discovery effects</span> to drive engagement and delight.
                        </p>
                    </div>

                    <div style="background: rgba(251, 191, 36, 0.1); padding: 18px; border: 1px solid #fbbf24; border-radius: 6px;">
                        <div style="color: #fbbf24; font-weight: bold; margin-bottom: 8px;">üéñÔ∏è RECOGNITION FRAMEWORK UPDATE</div>
                        <p style="margin: 0; color: #94a3b8; font-size: 0.95rem; line-height: 1.5;">
                            Implemented <span style="color: #fbbf24;">Simon performance evaluation dialog</span> with enhanced credits to celebrate associate contributions.
                        </p>
                    </div>
                </div>
            </div>

            <!-- BUG FIXES -->
            <div style="margin-bottom: 25px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #334155; padding-bottom: 15px;">
                    <span style="color: #f97316; font-size: 1.5rem;">üîß</span>
                    <div>
                        <div style="color: #f97316; font-family: 'Press Start 2P', cursive; font-size: 0.75rem;">DEFECT REMEDIATION SPRINTS</div>
                        <div style="color: #94a3b8; font-size: 0.85rem; margin-top: 5px;">Technical Debt Reduction & Stability Improvements</div>
                    </div>
                </div>

                <ul style="color: #cbd5e1; line-height: 2; margin: 0; padding-left: 25px;">
                    <li>Resolved <span style="color: #f97316;">portrait flashing artifacts</span> during visitor engagement sequences</li>
                    <li>Fixed <span style="color: #f97316;">credits initialization pipeline</span> to prevent mid-sequence startups</li>
                    <li>Addressed <span style="color: #f97316;">Carrie character balance concerns</span> through damage/cooldown ratio optimization</li>
                    <li>Corrected <span style="color: #f97316;">music logic pathways</span> for enraged, mecha-jeff, game-over, and yard timing scenarios</li>
                    <li>Resolved <span style="color: #f97316;">Jeff Bezos conversation anomalies</span> including throne room background rendering and interaction flow</li>
                    <li>Reworked <span style="color: #f97316;">Erwin sprite assets</span> for improved visual fidelity alignment</li>
                </ul>
            </div>

            <!-- CLOSING STATEMENT -->
            <div style="background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(10, 15, 30, 0.95) 100%); border: 2px dashed #475569; border-radius: 8px; padding: 20px; text-align: center;">
                <p style="color: #94a3b8; margin: 0; font-style: italic; line-height: 1.6;">
                    "These enhancements represent our unwavering commitment to <span style="color: #fbbf24;">Day 1 thinking</span> and
                    <span style="color: #14b8a6;">customer obsession</span>. We remain laser-focused on
                    <span style="color: #22c55e;">raising the bar</span> for warehouse safety gamification excellence."
                </p>
                <p style="color: #64748b; margin: 10px 0 0 0; font-size: 0.9rem;">
                    üéØ Have Backbone; Disagree and Commit üéØ Deliver Results üéØ Earn Trust
                </p>
            </div>

            <!-- PREVIOUS RELEASES -->
            <div style="margin-top: 35px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 25px; border-bottom: 2px solid #334155; padding-bottom: 15px;">
                    <span style="color: #64748b; font-size: 1.5rem;">üìú</span>
                    <div>
                        <div style="color: #64748b; font-family: 'Press Start 2P', cursive; font-size: 0.75rem;">HISTORICAL DEPLOYMENT LOG</div>
                        <div style="color: #475569; font-size: 0.85rem; margin-top: 5px;">Previous Operational Excellence Iterations</div>
                    </div>
                </div>

                <!-- v12.1.0 -->
                <div style="background: rgba(0,0,0,0.2); border: 1px solid #334155; border-radius: 6px; padding: 18px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div style="color: #a855f7; font-family: 'Press Start 2P', cursive; font-size: 0.65rem;">v12.1.0</div>
                        <div style="color: #475569; font-size: 0.8rem;">Q3 2025 ‚Ä¢ "SYNERGY SURGE"</div>
                    </div>
                    <ul style="color: #94a3b8; margin: 0; padding-left: 20px; line-height: 1.8; font-size: 0.95rem;">
                        <li>Deployed <span style="color: #a855f7;">AI-powered announcement ticker</span> leveraging Gemini integration for real-time associate communication touchpoints</li>
                        <li>Implemented <span style="color: #a855f7;">Worker Utilities module</span> with Excuse Generator and Ops Speak Translator for enhanced productivity theater</li>
                        <li>Right-sized the <span style="color: #a855f7;">landing page experience</span> with retro grid animations and CRT visual fidelity optimization</li>
                    </ul>
                </div>

                <!-- v11.0.0 -->
                <div style="background: rgba(0,0,0,0.2); border: 1px solid #334155; border-radius: 6px; padding: 18px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div style="color: #ec4899; font-family: 'Press Start 2P', cursive; font-size: 0.65rem;">v11.0.0</div>
                        <div style="color: #475569; font-size: 0.8rem;">Q2 2025 ‚Ä¢ "STAKEHOLDER DELIGHT"</div>
                    </div>
                    <ul style="color: #94a3b8; margin: 0; padding-left: 20px; line-height: 1.8; font-size: 0.95rem;">
                        <li>Launched <span style="color: #ec4899;">MEGA SIMON final encounter</span> with throne room environment and epic phase transitions</li>
                        <li>Introduced <span style="color: #ec4899;">Jeff Bezos cameo appearance</span> with rocket animations and aspirational messaging alignment</li>
                        <li>Enhanced <span style="color: #ec4899;">credits sequence</span> with scrolling acknowledgements and Easter egg discovery mechanisms</li>
                    </ul>
                </div>

                <!-- v10.5.0 -->
                <div style="background: rgba(0,0,0,0.2); border: 1px solid #334155; border-radius: 6px; padding: 18px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div style="color: #3b82f6; font-family: 'Press Start 2P', cursive; font-size: 0.65rem;">v10.5.0</div>
                        <div style="color: #475569; font-size: 0.8rem;">Q1 2025 ‚Ä¢ "ENGAGEMENT AMPLIFIER"</div>
                    </div>
                    <ul style="color: #94a3b8; margin: 0; padding-left: 20px; line-height: 1.8; font-size: 0.95rem;">
                        <li>Implemented <span style="color: #3b82f6;">Gemini-powered banter system</span> for context-aware inter-character dialog generation</li>
                        <li>Deployed <span style="color: #3b82f6;">text-to-speech integration</span> enabling auditory associate feedback loops</li>
                        <li>Optimized <span style="color: #3b82f6;">particle effect frameworks</span> for enhanced visual celebration of hazard remediation outcomes</li>
                    </ul>
                </div>

                <!-- v9.0.0 -->
                <div style="background: rgba(0,0,0,0.2); border: 1px solid #334155; border-radius: 6px; padding: 18px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div style="color: #f59e0b; font-family: 'Press Start 2P', cursive; font-size: 0.65rem;">v9.0.0</div>
                        <div style="color: #475569; font-size: 0.8rem;">Q4 2024 ‚Ä¢ "ASSOCIATE EMPOWERMENT"</div>
                    </div>
                    <ul style="color: #94a3b8; margin: 0; padding-left: 20px; line-height: 1.8; font-size: 0.95rem;">
                        <li>Released <span style="color: #f59e0b;">Erwin Manager character</span> with Tesla-powered velocity enhancement and high-risk/high-reward gameplay mechanics</li>
                        <li>Introduced <span style="color: #f59e0b;">Jelena "Jelly" HR visitor</span> with cascade attack pattern and policy enforcement protocols</li>
                        <li>Fixed <span style="color: #f59e0b;">game state persistence</span> to properly track cross-session progression metrics</li>
                    </ul>
                </div>

                <!-- v7.0.0 -->
                <div style="background: rgba(0,0,0,0.2); border: 1px solid #334155; border-radius: 6px; padding: 18px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div style="color: #10b981; font-family: 'Press Start 2P', cursive; font-size: 0.65rem;">v7.0.0</div>
                        <div style="color: #475569; font-size: 0.8rem;">Q3 2024 ‚Ä¢ "OPERATIONAL GENESIS"</div>
                    </div>
                    <ul style="color: #94a3b8; margin: 0; padding-left: 20px; line-height: 1.8; font-size: 0.95rem;">
                        <li>Launched <span style="color: #10b981;">full 7-level campaign</span> with progressive difficulty scaling and narrative-driven safety education</li>
                        <li>Implemented <span style="color: #10b981;">5 playable WHS coordinators</span> (Carrie, Nevena, Joao, Roman) with unique skill differentiation matrices</li>
                        <li>Deployed <span style="color: #10b981;">procedural map generation</span> with dynamic hazard placement algorithms aligned to OSHA compliance frameworks</li>
                        <li>Introduced <span style="color: #10b981;">6 visitor boss encounters</span> with distinctive attack patterns and escalation pathways</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>









